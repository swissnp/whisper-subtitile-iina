{"mappings":"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","sources":["<anon>","node_modules/.pnpm/shell-quote@1.8.3/node_modules/shell-quote/quote.js","node_modules/.pnpm/shell-quote@1.8.3/node_modules/shell-quote/parse.js","src/index.js","node_modules/.pnpm/@swc+helpers@0.5.17/node_modules/@swc/helpers/esm/_async_to_generator.js","node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.js","src/models.js","src/transcribe.js","node_modules/.pnpm/@swc+helpers@0.5.17/node_modules/@swc/helpers/esm/_sliced_to_array.js","node_modules/.pnpm/@swc+helpers@0.5.17/node_modules/@swc/helpers/esm/_array_with_holes.js","node_modules/.pnpm/@swc+helpers@0.5.17/node_modules/@swc/helpers/esm/_iterable_to_array_limit.js","node_modules/.pnpm/@swc+helpers@0.5.17/node_modules/@swc/helpers/esm/_non_iterable_rest.js","node_modules/.pnpm/@swc+helpers@0.5.17/node_modules/@swc/helpers/esm/_unsupported_iterable_to_array.js","node_modules/.pnpm/@swc+helpers@0.5.17/node_modules/@swc/helpers/esm/_array_like_to_array.js","node_modules/.pnpm/@swc+helpers@0.5.17/node_modules/@swc/helpers/esm/_to_consumable_array.js","node_modules/.pnpm/@swc+helpers@0.5.17/node_modules/@swc/helpers/esm/_array_without_holes.js","node_modules/.pnpm/@swc+helpers@0.5.17/node_modules/@swc/helpers/esm/_iterable_to_array.js","node_modules/.pnpm/@swc+helpers@0.5.17/node_modules/@swc/helpers/esm/_non_iterable_spread.js","node_modules/.pnpm/shell-quote@1.8.3/node_modules/shell-quote/index.js"],"sourcesContent":["(function () {\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire20c8\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire20c8\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"67qzV\", function(module, exports) {\n'use strict';\nmodule.exports = function quote(xs) {\n    return xs.map(function(s) {\n        if (s === '') return '\\'\\'';\n        if (s && typeof s === 'object') return s.op.replace(/(.)/g, '\\\\$1');\n        if (/[\"\\s\\\\]/.test(s) && !/'/.test(s)) return \"'\" + s.replace(/(['])/g, '\\\\$1') + \"'\";\n        if (/[\"'\\s]/.test(s)) return '\"' + s.replace(/([\"\\\\$`!])/g, '\\\\$1') + '\"';\n        return String(s).replace(/([A-Za-z]:)?([#!\"$&'()*,:;<=>?@[\\\\\\]^`{|}])/g, '$1\\\\$2');\n    }).join(' ');\n};\n\n});\n\nparcelRegister(\"iRVqS\", function(module, exports) {\n'use strict';\n// '<(' is process substitution operator and\n// can be parsed the same as control operator\nvar $dbc9ba25ff865df3$var$CONTROL = '(?:' + [\n    '\\\\|\\\\|',\n    '\\\\&\\\\&',\n    ';;',\n    '\\\\|\\\\&',\n    '\\\\<\\\\(',\n    '\\\\<\\\\<\\\\<',\n    '>>',\n    '>\\\\&',\n    '<\\\\&',\n    '[&;()|<>]'\n].join('|') + ')';\nvar $dbc9ba25ff865df3$var$controlRE = new RegExp('^' + $dbc9ba25ff865df3$var$CONTROL + '$');\nvar $dbc9ba25ff865df3$var$META = '|&;()<> \\\\t';\nvar $dbc9ba25ff865df3$var$SINGLE_QUOTE = '\"((\\\\\\\\\"|[^\"])*?)\"';\nvar $dbc9ba25ff865df3$var$DOUBLE_QUOTE = '\\'((\\\\\\\\\\'|[^\\'])*?)\\'';\nvar $dbc9ba25ff865df3$var$hash = /^#$/;\nvar $dbc9ba25ff865df3$var$SQ = \"'\";\nvar $dbc9ba25ff865df3$var$DQ = '\"';\nvar $dbc9ba25ff865df3$var$DS = '$';\nvar $dbc9ba25ff865df3$var$TOKEN = '';\nvar $dbc9ba25ff865df3$var$mult = 0x100000000; // Math.pow(16, 8);\nfor(var $dbc9ba25ff865df3$var$i = 0; $dbc9ba25ff865df3$var$i < 4; $dbc9ba25ff865df3$var$i++)$dbc9ba25ff865df3$var$TOKEN += ($dbc9ba25ff865df3$var$mult * Math.random()).toString(16);\nvar $dbc9ba25ff865df3$var$startsWithToken = new RegExp('^' + $dbc9ba25ff865df3$var$TOKEN);\nfunction $dbc9ba25ff865df3$var$matchAll(s, r) {\n    var origIndex = r.lastIndex;\n    var matches = [];\n    var matchObj;\n    while(matchObj = r.exec(s)){\n        matches.push(matchObj);\n        if (r.lastIndex === matchObj.index) r.lastIndex += 1;\n    }\n    r.lastIndex = origIndex;\n    return matches;\n}\nfunction $dbc9ba25ff865df3$var$getVar(env, pre, key) {\n    var r = typeof env === 'function' ? env(key) : env[key];\n    if (typeof r === 'undefined' && key != '') r = '';\n    else if (typeof r === 'undefined') r = '$';\n    if (typeof r === 'object') return pre + $dbc9ba25ff865df3$var$TOKEN + JSON.stringify(r) + $dbc9ba25ff865df3$var$TOKEN;\n    return pre + r;\n}\nfunction $dbc9ba25ff865df3$var$parseInternal(string, env, opts) {\n    if (!opts) opts = {};\n    var BS = opts.escape || '\\\\';\n    var BAREWORD = '(\\\\' + BS + '[\\'\"' + $dbc9ba25ff865df3$var$META + ']|[^\\\\s\\'\"' + $dbc9ba25ff865df3$var$META + '])+';\n    var chunker = new RegExp([\n        '(' + $dbc9ba25ff865df3$var$CONTROL + ')',\n        '(' + BAREWORD + '|' + $dbc9ba25ff865df3$var$SINGLE_QUOTE + '|' + $dbc9ba25ff865df3$var$DOUBLE_QUOTE + ')+'\n    ].join('|'), 'g');\n    var matches = $dbc9ba25ff865df3$var$matchAll(string, chunker);\n    if (matches.length === 0) return [];\n    if (!env) env = {};\n    var commented = false;\n    return matches.map(function(match) {\n        var s = match[0];\n        if (!s || commented) return void 0;\n        if ($dbc9ba25ff865df3$var$controlRE.test(s)) return {\n            op: s\n        };\n        // Hand-written scanner/parser for Bash quoting rules:\n        //\n        // 1. inside single quotes, all characters are printed literally.\n        // 2. inside double quotes, all characters are printed literally\n        //    except variables prefixed by '$' and backslashes followed by\n        //    either a double quote or another backslash.\n        // 3. outside of any quotes, backslashes are treated as escape\n        //    characters and not printed (unless they are themselves escaped)\n        // 4. quote context can switch mid-token if there is no whitespace\n        //     between the two quote contexts (e.g. all'one'\"token\" parses as\n        //     \"allonetoken\")\n        var quote = false;\n        var esc = false;\n        var out = '';\n        var isGlob = false;\n        var i;\n        function parseEnvVar() {\n            i += 1;\n            var varend;\n            var varname;\n            var char = s.charAt(i);\n            if (char === '{') {\n                i += 1;\n                if (s.charAt(i) === '}') throw new Error('Bad substitution: ' + s.slice(i - 2, i + 1));\n                varend = s.indexOf('}', i);\n                if (varend < 0) throw new Error('Bad substitution: ' + s.slice(i));\n                varname = s.slice(i, varend);\n                i = varend;\n            } else if (/[*@#?$!_-]/.test(char)) {\n                varname = char;\n                i += 1;\n            } else {\n                var slicedFromI = s.slice(i);\n                varend = slicedFromI.match(/[^\\w\\d_]/);\n                if (!varend) {\n                    varname = slicedFromI;\n                    i = s.length;\n                } else {\n                    varname = slicedFromI.slice(0, varend.index);\n                    i += varend.index - 1;\n                }\n            }\n            return $dbc9ba25ff865df3$var$getVar(env, '', varname);\n        }\n        for(i = 0; i < s.length; i++){\n            var c = s.charAt(i);\n            isGlob = isGlob || !quote && (c === '*' || c === '?');\n            if (esc) {\n                out += c;\n                esc = false;\n            } else if (quote) {\n                if (c === quote) quote = false;\n                else if (quote == $dbc9ba25ff865df3$var$SQ) out += c;\n                else {\n                    if (c === BS) {\n                        i += 1;\n                        c = s.charAt(i);\n                        if (c === $dbc9ba25ff865df3$var$DQ || c === BS || c === $dbc9ba25ff865df3$var$DS) out += c;\n                        else out += BS + c;\n                    } else if (c === $dbc9ba25ff865df3$var$DS) out += parseEnvVar();\n                    else out += c;\n                }\n            } else if (c === $dbc9ba25ff865df3$var$DQ || c === $dbc9ba25ff865df3$var$SQ) quote = c;\n            else if ($dbc9ba25ff865df3$var$controlRE.test(c)) return {\n                op: s\n            };\n            else if ($dbc9ba25ff865df3$var$hash.test(c)) {\n                commented = true;\n                var commentObj = {\n                    comment: string.slice(match.index + i + 1)\n                };\n                if (out.length) return [\n                    out,\n                    commentObj\n                ];\n                return [\n                    commentObj\n                ];\n            } else if (c === BS) esc = true;\n            else if (c === $dbc9ba25ff865df3$var$DS) out += parseEnvVar();\n            else out += c;\n        }\n        if (isGlob) return {\n            op: 'glob',\n            pattern: out\n        };\n        return out;\n    }).reduce(function(prev, arg) {\n        // TODO: replace this whole reduce with a concat\n        return typeof arg === 'undefined' ? prev : prev.concat(arg);\n    }, []);\n}\nmodule.exports = function parse(s, env, opts) {\n    var mapped = $dbc9ba25ff865df3$var$parseInternal(s, env, opts);\n    if (typeof env !== 'function') return mapped;\n    return mapped.reduce(function(acc, s) {\n        if (typeof s === 'object') return acc.concat(s);\n        var xs = s.split(RegExp('(' + $dbc9ba25ff865df3$var$TOKEN + '.*?' + $dbc9ba25ff865df3$var$TOKEN + ')', 'g'));\n        if (xs.length === 1) return acc.concat(xs[0]);\n        return acc.concat(xs.filter(Boolean).map(function(x) {\n            if ($dbc9ba25ff865df3$var$startsWithToken.test(x)) return JSON.parse(x.split($dbc9ba25ff865df3$var$TOKEN)[1]);\n            return x;\n        }));\n    }, []);\n};\n\n});\n\nfunction $6008c95c713781eb$var$asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n        var info = gen[key](arg);\n        var value = info.value;\n    } catch (error) {\n        reject(error);\n        return;\n    }\n    if (info.done) resolve(value);\n    else Promise.resolve(value).then(_next, _throw);\n}\nfunction $6008c95c713781eb$export$71511d61b312f219(fn) {\n    return function() {\n        var self = this, args = arguments;\n        return new Promise(function(resolve, reject) {\n            var gen = fn.apply(self, args);\n            function _next(value) {\n                $6008c95c713781eb$var$asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n            }\n            function _throw(err) {\n                $6008c95c713781eb$var$asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n            }\n            _next(undefined);\n        });\n    };\n}\n\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */ /* global Reflect, Promise, SuppressedError, Symbol, Iterator */ var $18ac8221ad1dd540$var$extendStatics = function extendStatics1(d, b) {\n    $18ac8221ad1dd540$var$extendStatics = Object.setPrototypeOf || ({\n        __proto__: []\n    }) instanceof Array && function(d, b) {\n        d.__proto__ = b;\n    } || function(d, b) {\n        for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return $18ac8221ad1dd540$var$extendStatics(d, b);\n};\nfunction $18ac8221ad1dd540$export$a8ba968b8961cb8a(d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    $18ac8221ad1dd540$var$extendStatics(d, b);\n    function __() {\n        this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar $18ac8221ad1dd540$export$18ce0697a983be9b = function __assign1() {\n    $18ac8221ad1dd540$export$18ce0697a983be9b = Object.assign || function __assign(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return $18ac8221ad1dd540$export$18ce0697a983be9b.apply(this, arguments);\n};\nfunction $18ac8221ad1dd540$export$3c9a16f847548506(s, e) {\n    var t = {};\n    for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") {\n        for(var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++)if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n    }\n    return t;\n}\nfunction $18ac8221ad1dd540$export$29e00dfd3077644b(decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for(var i = decorators.length - 1; i >= 0; i--)if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\nfunction $18ac8221ad1dd540$export$d5ad3fd78186038f(paramIndex, decorator) {\n    return function(target, key) {\n        decorator(target, key, paramIndex);\n    };\n}\nfunction $18ac8221ad1dd540$export$3a84e1ae4e97e9b0(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) {\n        if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\");\n        return f;\n    }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for(var i = decorators.length - 1; i >= 0; i--){\n        var context = {};\n        for(var p in contextIn)context[p] = p === \"access\" ? {} : contextIn[p];\n        for(var p in contextIn.access)context.access[p] = contextIn.access[p];\n        context.addInitializer = function(f) {\n            if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\");\n            extraInitializers.push(accept(f || null));\n        };\n        var result = (0, decorators[i])(kind === \"accessor\" ? {\n            get: descriptor.get,\n            set: descriptor.set\n        } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        } else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n}\nfunction $18ac8221ad1dd540$export$d831c04e792af3d(thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for(var i = 0; i < initializers.length; i++)value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    return useValue ? value : void 0;\n}\nfunction $18ac8221ad1dd540$export$6a2a36740a146cb8(x) {\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\n}\nfunction $18ac8221ad1dd540$export$d1a06452d3489bc7(f, name, prefix) {\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n    return Object.defineProperty(f, \"name\", {\n        configurable: true,\n        value: prefix ? \"\".concat(prefix, \" \", name) : name\n    });\n}\nfunction $18ac8221ad1dd540$export$f1db080c865becb9(metadataKey, metadataValue) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\nfunction $18ac8221ad1dd540$export$1050f835b63b671e(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n}\nfunction $18ac8221ad1dd540$export$67ebef60e6f28a6(thisArg, body) {\n    var _ = {\n        label: 0,\n        sent: function sent() {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n        },\n        trys: [],\n        ops: []\n    }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() {\n        return this;\n    }), g;\n    function verb(n) {\n        return function(v) {\n            return step([\n                n,\n                v\n            ]);\n        };\n    }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while(g && (g = 0, op[0] && (_ = 0)), _)try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [\n                op[0] & 2,\n                t.value\n            ];\n            switch(op[0]){\n                case 0:\n                case 1:\n                    t = op;\n                    break;\n                case 4:\n                    _.label++;\n                    return {\n                        value: op[1],\n                        done: false\n                    };\n                case 5:\n                    _.label++;\n                    y = op[1];\n                    op = [\n                        0\n                    ];\n                    continue;\n                case 7:\n                    op = _.ops.pop();\n                    _.trys.pop();\n                    continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                        _ = 0;\n                        continue;\n                    }\n                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                        _.label = op[1];\n                        break;\n                    }\n                    if (op[0] === 6 && _.label < t[1]) {\n                        _.label = t[1];\n                        t = op;\n                        break;\n                    }\n                    if (t && _.label < t[2]) {\n                        _.label = t[2];\n                        _.ops.push(op);\n                        break;\n                    }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop();\n                    continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) {\n            op = [\n                6,\n                e\n            ];\n            y = 0;\n        } finally{\n            f = t = 0;\n        }\n        if (op[0] & 5) throw op[1];\n        return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n        };\n    }\n}\nvar $18ac8221ad1dd540$export$45d3717a4c69092e = Object.create ? function __createBinding(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) desc = {\n        enumerable: true,\n        get: function get() {\n            return m[k];\n        }\n    };\n    Object.defineProperty(o, k2, desc);\n} : function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n};\nfunction $18ac8221ad1dd540$export$f33643c0debef087(m, o) {\n    for(var p in m)if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) $18ac8221ad1dd540$export$45d3717a4c69092e(o, m, p);\n}\nfunction $18ac8221ad1dd540$export$19a8beecd37a4c45(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function next() {\n            if (o && i >= o.length) o = void 0;\n            return {\n                value: o && o[i++],\n                done: !o\n            };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction $18ac8221ad1dd540$export$8d051b38c9118094(o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while((n === void 0 || n-- > 0) && !(r = i.next()).done)ar.push(r.value);\n    } catch (error) {\n        e = {\n            error: error\n        };\n    } finally{\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        } finally{\n            if (e) throw e.error;\n        }\n    }\n    return ar;\n}\nfunction $18ac8221ad1dd540$export$afc72e2116322959() {\n    for(var ar = [], i = 0; i < arguments.length; i++)ar = ar.concat($18ac8221ad1dd540$export$8d051b38c9118094(arguments[i]));\n    return ar;\n}\nfunction $18ac8221ad1dd540$export$6388937ca91ccae8() {\n    for(var s = 0, i = 0, il = arguments.length; i < il; i++)s += arguments[i].length;\n    for(var r = Array(s), k = 0, i = 0; i < il; i++)for(var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)r[k] = a[j];\n    return r;\n}\nfunction $18ac8221ad1dd540$export$1216008129fb82ed(to, from, pack) {\n    if (pack || arguments.length === 2) {\n        for(var i = 0, l = from.length, ar; i < l; i++)if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n}\nfunction $18ac8221ad1dd540$export$10c90e4f7922046c(v) {\n    return this instanceof $18ac8221ad1dd540$export$10c90e4f7922046c ? (this.v = v, this) : new $18ac8221ad1dd540$export$10c90e4f7922046c(v);\n}\nfunction $18ac8221ad1dd540$export$e427f37a30a4de9b(thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function() {\n        return this;\n    }, i;\n    function awaitReturn(f) {\n        return function(v) {\n            return Promise.resolve(v).then(f, reject);\n        };\n    }\n    function verb(n, f) {\n        if (g[n]) {\n            i[n] = function(v) {\n                return new Promise(function(a, b) {\n                    q.push([\n                        n,\n                        v,\n                        a,\n                        b\n                    ]) > 1 || resume(n, v);\n                });\n            };\n            if (f) i[n] = f(i[n]);\n        }\n    }\n    function resume(n, v) {\n        try {\n            step(g[n](v));\n        } catch (e) {\n            settle(q[0][3], e);\n        }\n    }\n    function step(r) {\n        r.value instanceof $18ac8221ad1dd540$export$10c90e4f7922046c ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n    }\n    function fulfill(value) {\n        resume(\"next\", value);\n    }\n    function reject(value) {\n        resume(\"throw\", value);\n    }\n    function settle(f, v) {\n        if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n    }\n}\nfunction $18ac8221ad1dd540$export$bbd80228419bb833(o) {\n    var i, p;\n    return i = {}, verb(\"next\"), verb(\"throw\", function(e) {\n        throw e;\n    }), verb(\"return\"), i[Symbol.iterator] = function() {\n        return this;\n    }, i;\n    function verb(n, f) {\n        i[n] = o[n] ? function(v) {\n            return (p = !p) ? {\n                value: $18ac8221ad1dd540$export$10c90e4f7922046c(o[n](v)),\n                done: false\n            } : f ? f(v) : v;\n        } : f;\n    }\n}\nfunction $18ac8221ad1dd540$export$e3b29a3d6162315f(o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof $18ac8221ad1dd540$export$19a8beecd37a4c45 === \"function\" ? $18ac8221ad1dd540$export$19a8beecd37a4c45(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function() {\n        return this;\n    }, i);\n    function verb(n) {\n        i[n] = o[n] && function(v) {\n            return new Promise(function(resolve, reject) {\n                v = o[n](v), settle(resolve, reject, v.done, v.value);\n            });\n        };\n    }\n    function settle(resolve, reject, d, v) {\n        Promise.resolve(v).then(function(v) {\n            resolve({\n                value: v,\n                done: d\n            });\n        }, reject);\n    }\n}\nfunction $18ac8221ad1dd540$export$4fb47efe1390b86f(cooked, raw) {\n    if (Object.defineProperty) Object.defineProperty(cooked, \"raw\", {\n        value: raw\n    });\n    else cooked.raw = raw;\n    return cooked;\n}\nvar $18ac8221ad1dd540$var$__setModuleDefault = Object.create ? function __setModuleDefault(o, v) {\n    Object.defineProperty(o, \"default\", {\n        enumerable: true,\n        value: v\n    });\n} : function(o, v) {\n    o[\"default\"] = v;\n};\nvar $18ac8221ad1dd540$var$ownKeys = function ownKeys1(o) {\n    $18ac8221ad1dd540$var$ownKeys = Object.getOwnPropertyNames || function(o) {\n        var ar = [];\n        for(var k in o)if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n        return ar;\n    };\n    return $18ac8221ad1dd540$var$ownKeys(o);\n};\nfunction $18ac8221ad1dd540$export$c21735bcef00d192(mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) {\n        for(var k = $18ac8221ad1dd540$var$ownKeys(mod), i = 0; i < k.length; i++)if (k[i] !== \"default\") $18ac8221ad1dd540$export$45d3717a4c69092e(result, mod, k[i]);\n    }\n    $18ac8221ad1dd540$var$__setModuleDefault(result, mod);\n    return result;\n}\nfunction $18ac8221ad1dd540$export$da59b14a69baef04(mod) {\n    return mod && mod.__esModule ? mod : {\n        default: mod\n    };\n}\nfunction $18ac8221ad1dd540$export$d5dcaf168c640c35(receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\nfunction $18ac8221ad1dd540$export$d40a35129aaff81f(receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n}\nfunction $18ac8221ad1dd540$export$81fdc39f203e4e04(state, receiver) {\n    if (receiver === null || typeof receiver !== \"object\" && typeof receiver !== \"function\") throw new TypeError(\"Cannot use 'in' operator on non-object\");\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\nfunction $18ac8221ad1dd540$export$88ac25d8e944e405(env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function dispose() {\n            try {\n                inner.call(this);\n            } catch (e) {\n                return Promise.reject(e);\n            }\n        };\n        env.stack.push({\n            value: value,\n            dispose: dispose,\n            async: async\n        });\n    } else if (async) env.stack.push({\n        async: true\n    });\n    return value;\n}\nvar $18ac8221ad1dd540$var$_SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function _SuppressedError(error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\nfunction $18ac8221ad1dd540$export$8f076105dc360e92(env) {\n    function fail(e) {\n        env.error = env.hasError ? new $18ac8221ad1dd540$var$_SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n        env.hasError = true;\n    }\n    var r, s = 0;\n    function next() {\n        while(r = env.stack.pop())try {\n            if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n            if (r.dispose) {\n                var result = r.dispose.call(r.value);\n                if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) {\n                    fail(e);\n                    return next();\n                });\n            } else s |= 1;\n        } catch (e) {\n            fail(e);\n        }\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n        if (env.hasError) throw env.error;\n    }\n    return next();\n}\nfunction $18ac8221ad1dd540$export$889dfb5d17574b0b(path, preserveJsx) {\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function(m, tsx, d, ext, cm) {\n        return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : d + ext + \".\" + cm.toLowerCase() + \"js\";\n    });\n    return path;\n}\nvar $18ac8221ad1dd540$export$2e2bcd8739ae039 = {\n    __extends: $18ac8221ad1dd540$export$a8ba968b8961cb8a,\n    __assign: $18ac8221ad1dd540$export$18ce0697a983be9b,\n    __rest: $18ac8221ad1dd540$export$3c9a16f847548506,\n    __decorate: $18ac8221ad1dd540$export$29e00dfd3077644b,\n    __param: $18ac8221ad1dd540$export$d5ad3fd78186038f,\n    __esDecorate: $18ac8221ad1dd540$export$3a84e1ae4e97e9b0,\n    __runInitializers: $18ac8221ad1dd540$export$d831c04e792af3d,\n    __propKey: $18ac8221ad1dd540$export$6a2a36740a146cb8,\n    __setFunctionName: $18ac8221ad1dd540$export$d1a06452d3489bc7,\n    __metadata: $18ac8221ad1dd540$export$f1db080c865becb9,\n    __awaiter: $18ac8221ad1dd540$export$1050f835b63b671e,\n    __generator: $18ac8221ad1dd540$export$67ebef60e6f28a6,\n    __createBinding: $18ac8221ad1dd540$export$45d3717a4c69092e,\n    __exportStar: $18ac8221ad1dd540$export$f33643c0debef087,\n    __values: $18ac8221ad1dd540$export$19a8beecd37a4c45,\n    __read: $18ac8221ad1dd540$export$8d051b38c9118094,\n    __spread: $18ac8221ad1dd540$export$afc72e2116322959,\n    __spreadArrays: $18ac8221ad1dd540$export$6388937ca91ccae8,\n    __spreadArray: $18ac8221ad1dd540$export$1216008129fb82ed,\n    __await: $18ac8221ad1dd540$export$10c90e4f7922046c,\n    __asyncGenerator: $18ac8221ad1dd540$export$e427f37a30a4de9b,\n    __asyncDelegator: $18ac8221ad1dd540$export$bbd80228419bb833,\n    __asyncValues: $18ac8221ad1dd540$export$e3b29a3d6162315f,\n    __makeTemplateObject: $18ac8221ad1dd540$export$4fb47efe1390b86f,\n    __importStar: $18ac8221ad1dd540$export$c21735bcef00d192,\n    __importDefault: $18ac8221ad1dd540$export$da59b14a69baef04,\n    __classPrivateFieldGet: $18ac8221ad1dd540$export$d5dcaf168c640c35,\n    __classPrivateFieldSet: $18ac8221ad1dd540$export$d40a35129aaff81f,\n    __classPrivateFieldIn: $18ac8221ad1dd540$export$81fdc39f203e4e04,\n    __addDisposableResource: $18ac8221ad1dd540$export$88ac25d8e944e405,\n    __disposeResources: $18ac8221ad1dd540$export$8f076105dc360e92,\n    __rewriteRelativeImportExtension: $18ac8221ad1dd540$export$889dfb5d17574b0b\n};\n\n\nvar $ef9582840825dae1$var$preferences = iina.preferences;\nvar $ef9582840825dae1$var$MODELS = [\n    {\n        name: 'tiny',\n        size: '75 MiB',\n        sha: 'bd577a113a864445d4c299885e0cb97d4ba92b5f'\n    },\n    {\n        name: 'tiny.en',\n        size: '75 MiB',\n        sha: 'c78c86eb1a8faa21b369bcd33207cc90d64ae9df'\n    },\n    {\n        name: 'base',\n        size: '142 MiB',\n        sha: '465707469ff3a37a2b9b8d8f89f2f99de7299dac'\n    },\n    {\n        name: 'base.en',\n        size: '142 MiB',\n        sha: '137c40403d78fd54d454da0f9bd998f78703390c'\n    },\n    {\n        name: 'small',\n        size: '466 MiB',\n        sha: '55356645c2b361a969dfd0ef2c5a50d530afd8d5'\n    },\n    {\n        name: 'small.en',\n        size: '466 MiB',\n        sha: 'db8a495a91d927739e50b3fc1cc4c6b8f6c2d022'\n    },\n    {\n        name: 'small.en-tdrz',\n        size: '465 MiB',\n        sha: 'b6c6e7e89af1a35c08e6de56b66ca6a02a2fdfa1'\n    },\n    {\n        name: 'medium',\n        size: '1.5 GiB',\n        sha: 'fd9727b6e1217c2f614f9b698455c4ffd82463b4'\n    },\n    {\n        name: 'medium.en',\n        size: '1.5 GiB',\n        sha: '8c30f0e44ce9560643ebd10bbe50cd20eafd3723'\n    },\n    {\n        name: 'large-v1',\n        size: '2.9 GiB',\n        sha: 'b1caaf735c4cc1429223d5a74f0f4d0b9b59a299'\n    },\n    {\n        name: 'large-v2',\n        size: '2.9 GiB',\n        sha: '0f4c8e34f21cf1a914c59d8b3ce882345ad349d6'\n    },\n    {\n        name: 'large-v2-q5_0',\n        size: '1.1 GiB',\n        sha: '00e39f2196344e901b3a2bd5814807a769bd1630'\n    },\n    {\n        name: 'large-v3',\n        size: '2.9 GiB',\n        sha: 'ad82bf6a9043ceed055076d0fd39f5f186ff8062'\n    },\n    {\n        name: 'large-v3-q5_0',\n        size: '1.1 GiB',\n        sha: 'e6e2ed78495d403bef4b7cff42ef4aaadcfea8de'\n    },\n    {\n        name: 'large-v3-turbo',\n        size: '1.5 GiB',\n        sha: '4af2b29d7ec73d781377bfd1758ca957a807e941'\n    },\n    {\n        name: 'large-v3-turbo-q5_0',\n        size: '547 MiB',\n        sha: 'e050f7970618a659205450ad97eb95a18d69c9ee'\n    }\n];\nvar $ef9582840825dae1$export$8d63af86d795ece4 = function listModels() {\n    return $ef9582840825dae1$var$MODELS.filter(function(model) {\n        return $ef9582840825dae1$var$preferences.get('show_' + model.name.replaceAll(/[-.]/g, '_'));\n    });\n};\n\n\n\nfunction $37af0dbaac7b5eaa$export$71511d61b312f219(arr) {\n    if (Array.isArray(arr)) return arr;\n}\n\n\nfunction $94453e63d018c329$export$71511d61b312f219(arr, i) {\n    var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n    if (_i == null) return;\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _s, _e;\n    try {\n        for(_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true){\n            _arr.push(_s.value);\n            if (i && _arr.length === i) break;\n        }\n    } catch (err) {\n        _d = true;\n        _e = err;\n    } finally{\n        try {\n            if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n        } finally{\n            if (_d) throw _e;\n        }\n    }\n    return _arr;\n}\n\n\nfunction $0e121237311b84d0$export$71511d61b312f219() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\n\nfunction $dd5adb9c640d1882$export$71511d61b312f219(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];\n    return arr2;\n}\n\n\nfunction $aadf69894869ce83$export$71511d61b312f219(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return (0, $dd5adb9c640d1882$export$71511d61b312f219)(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(n);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return (0, $dd5adb9c640d1882$export$71511d61b312f219)(o, minLen);\n}\n\n\nfunction $d237cff101338c18$export$71511d61b312f219(arr, i) {\n    return (0, $37af0dbaac7b5eaa$export$71511d61b312f219)(arr) || (0, $94453e63d018c329$export$71511d61b312f219)(arr, i) || (0, $aadf69894869ce83$export$71511d61b312f219)(arr, i) || (0, $0e121237311b84d0$export$71511d61b312f219)();\n}\n\n\n\nfunction $58d5c159d14ee106$export$71511d61b312f219(arr) {\n    if (Array.isArray(arr)) return (0, $dd5adb9c640d1882$export$71511d61b312f219)(arr);\n}\n\n\nfunction $5373a2b8adc8ad13$export$71511d61b312f219(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\n\nfunction $f851d9ab611f613b$export$71511d61b312f219() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\n\n\nfunction $4bd9c20251de0dba$export$71511d61b312f219(arr) {\n    return (0, $58d5c159d14ee106$export$71511d61b312f219)(arr) || (0, $5373a2b8adc8ad13$export$71511d61b312f219)(arr) || (0, $aadf69894869ce83$export$71511d61b312f219)(arr) || (0, $f851d9ab611f613b$export$71511d61b312f219)();\n}\n\n\n\nvar $c4f3a659ba179370$export$ee7a15c61bfdeb11;\nvar $c4f3a659ba179370$export$98e6a39c04603d36;\n'use strict';\n\n$c4f3a659ba179370$export$ee7a15c61bfdeb11 = (parcelRequire(\"67qzV\"));\n\n$c4f3a659ba179370$export$98e6a39c04603d36 = (parcelRequire(\"iRVqS\"));\n\n\nvar $f2bd40ec63a26367$var$console = iina.console, $f2bd40ec63a26367$var$core = iina.core, $f2bd40ec63a26367$var$preferences = iina.preferences, $f2bd40ec63a26367$var$utils = iina.utils, $f2bd40ec63a26367$var$http = iina.http, $f2bd40ec63a26367$var$file = iina.file;\nvar $f2bd40ec63a26367$var$HOME_PATH = '~/Library/Application Support/com.colliderli.iina/plugins/';\nvar $f2bd40ec63a26367$var$SERVER_PID_FILE = \"@tmp/whisper_server.pid\";\nvar $f2bd40ec63a26367$var$LOG_POLL_INTERVAL_MS = 1000;\nvar $f2bd40ec63a26367$var$LOG_SEGMENT_REGEX = /^\\[(\\d{2}:\\d{2}:\\d{2}\\.\\d{3}) --> (\\d{2}:\\d{2}:\\d{2}\\.\\d{3})]\\s+(.*)$/;\nvar $f2bd40ec63a26367$var$OPENAI_SIZE_LIMIT_BYTES = 26214400;\nvar $f2bd40ec63a26367$var$OPENAI_AUDIO_PROFILES = [\n    {\n        name: \"aac_high\",\n        ext: \"m4a\",\n        mime: \"audio/mp4\",\n        description: \"AAC 96 kbps mono 16 kHz\",\n        ffmpegArgs: [\n            '-vn',\n            '-ar',\n            '16000',\n            '-ac',\n            '1',\n            '-c:a',\n            'aac',\n            '-b:a',\n            '96k',\n            '-movflags',\n            '+faststart'\n        ]\n    },\n    {\n        name: \"aac_medium\",\n        ext: \"m4a\",\n        mime: \"audio/mp4\",\n        description: \"AAC 64 kbps mono 16 kHz\",\n        ffmpegArgs: [\n            '-vn',\n            '-ar',\n            '16000',\n            '-ac',\n            '1',\n            '-c:a',\n            'aac',\n            '-b:a',\n            '64k',\n            '-movflags',\n            '+faststart'\n        ]\n    },\n    {\n        name: \"opus_voice\",\n        ext: \"webm\",\n        mime: \"audio/webm\",\n        description: \"Opus 48 kbps mono 16 kHz\",\n        ffmpegArgs: [\n            '-vn',\n            '-ar',\n            '16000',\n            '-ac',\n            '1',\n            '-c:a',\n            'libopus',\n            '-b:a',\n            '48k',\n            '-vbr',\n            'on'\n        ]\n    },\n    {\n        name: \"mp3_speech\",\n        ext: \"mp3\",\n        mime: \"audio/mpeg\",\n        description: \"MP3 64 kbps mono 16 kHz\",\n        ffmpegArgs: [\n            '-vn',\n            '-ar',\n            '16000',\n            '-ac',\n            '1',\n            '-b:a',\n            '64k',\n            '-f',\n            'mp3'\n        ]\n    },\n    {\n        name: \"mp3_low\",\n        ext: \"mp3\",\n        mime: \"audio/mpeg\",\n        description: \"MP3 48 kbps mono 16 kHz\",\n        ffmpegArgs: [\n            '-vn',\n            '-ar',\n            '16000',\n            '-ac',\n            '1',\n            '-b:a',\n            '48k',\n            '-f',\n            'mp3'\n        ]\n    }\n];\nvar $f2bd40ec63a26367$var$activeServerInfo = null;\nfunction $f2bd40ec63a26367$export$6479b296c537a758(model) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var useOpenAI, url, fileName, tempWavFile, subtitlePath, _tmp;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    useOpenAI = $f2bd40ec63a26367$export$15fc2836d2d9603();\n                    $f2bd40ec63a26367$var$console.log(`[Whisperina] Selected backend: ${useOpenAI ? \"OpenAI Streaming API\" : \"Local whisper.cpp server\"}.`);\n                    if (!!useOpenAI) return [\n                        3,\n                        2\n                    ];\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$downloadOrGetModel(model)\n                    ];\n                case 1:\n                    _state.sent();\n                    _state.label = 2;\n                case 2:\n                    url = $f2bd40ec63a26367$var$core.status.url;\n                    if (!url.startsWith(\"file://\")) throw new Error(`Subtitle generation doesn't work with non-local file ${url}.`);\n                    fileName = url.substring(7);\n                    $f2bd40ec63a26367$var$core.osd(\"Generating temporary wave file...\");\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$generateTemporaryWaveFiles(fileName)\n                    ];\n                case 3:\n                    tempWavFile = _state.sent();\n                    $f2bd40ec63a26367$var$console.log(`[Whisperina] Temporary WAV ready at ${tempWavFile}.`);\n                    $f2bd40ec63a26367$var$core.osd(useOpenAI ? \"Transcribing with OpenAI...\" : \"Transcribing...\");\n                    if (!useOpenAI) return [\n                        3,\n                        5\n                    ];\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$transcribeWithOpenAI(tempWavFile, fileName)\n                    ];\n                case 4:\n                    _tmp = _state.sent();\n                    return [\n                        3,\n                        7\n                    ];\n                case 5:\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$transcribeWithWhisperServer(tempWavFile, model, fileName)\n                    ];\n                case 6:\n                    _tmp = _state.sent();\n                    _state.label = 7;\n                case 7:\n                    subtitlePath = _tmp;\n                    $f2bd40ec63a26367$var$core.osd(\"Transcription succeeded.\");\n                    return [\n                        2,\n                        [\n                            subtitlePath\n                        ]\n                    ];\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$downloadOrGetModel(model) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    if (!$f2bd40ec63a26367$var$utils.fileInPath(`@data/ggml-${model}.bin`)) return [\n                        3,\n                        1\n                    ];\n                    $f2bd40ec63a26367$var$core.osd(`Model ${model} already exists.`);\n                    return [\n                        3,\n                        4\n                    ];\n                case 1:\n                    if (!$f2bd40ec63a26367$var$utils.ask(`Model ${model} does not exist. Would you like to download it now?`)) return [\n                        3,\n                        3\n                    ];\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$execWrapped(`${$f2bd40ec63a26367$var$HOME}/bin/download-ggml-model.sh`, [\n                            model\n                        ], $f2bd40ec63a26367$var$DATA)\n                    ];\n                case 2:\n                    _state.sent();\n                    $f2bd40ec63a26367$var$core.osd(`Model ${model} has been successfully downloaded.`);\n                    return [\n                        3,\n                        4\n                    ];\n                case 3:\n                    throw Error(`No such model ${model}.`);\n                case 4:\n                    return [\n                        2\n                    ];\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$generateTemporaryWaveFiles(fileName) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var tempWavFile;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    tempWavFile = $f2bd40ec63a26367$var$utils.resolvePath(\"@tmp/whisper_tmp.wav\");\n                    $f2bd40ec63a26367$var$console.log(`[Whisperina] Running ffmpeg to produce intermediate WAV from ${fileName}.`);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$execWrapped($f2bd40ec63a26367$var$getFfmpegPath(), [\n                            '-y',\n                            '-i',\n                            fileName,\n                            '-ar',\n                            '16000',\n                            '-ac',\n                            '1',\n                            \"-c:a\",\n                            \"pcm_s16le\",\n                            tempWavFile\n                        ])\n                    ];\n                case 1:\n                    _state.sent();\n                    return [\n                        2,\n                        tempWavFile\n                    ];\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$transcribeWithWhisperServer(tempWavName, modelName, sourceMediaPath) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var server, subtitlePath;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    $f2bd40ec63a26367$var$console.log(`[Whisperina] Starting whisper.cpp transcription with model ${modelName}.`);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$startWhisperServer(modelName)\n                    ];\n                case 1:\n                    server = _state.sent();\n                    subtitlePath = $f2bd40ec63a26367$var$utils.resolvePath(\"@tmp/whisper_tmp.wav.srt\");\n                    _state.label = 2;\n                case 2:\n                    _state.trys.push([\n                        2,\n                        ,\n                        5,\n                        7\n                    ]);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$streamTranscription(server, tempWavName, subtitlePath)\n                    ];\n                case 3:\n                    _state.sent();\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$persistSubtitleCopy(subtitlePath, sourceMediaPath)\n                    ];\n                case 4:\n                    _state.sent();\n                    $f2bd40ec63a26367$var$console.log(\"[Whisperina] whisper.cpp transcription finished.\");\n                    return [\n                        2,\n                        subtitlePath\n                    ];\n                case 5:\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$stopWhisperServer(server)\n                    ];\n                case 6:\n                    _state.sent();\n                    return [\n                        7\n                    ];\n                case 7:\n                    return [\n                        2\n                    ];\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$transcribeWithOpenAI(tempWavName, sourceMediaPath) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var subtitlePath, rawResponsePath, preparedAudio, streamHandler;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    $f2bd40ec63a26367$var$console.log(\"[Whisperina] Starting OpenAI streaming transcription.\");\n                    subtitlePath = $f2bd40ec63a26367$var$utils.resolvePath(\"@tmp/whisper_tmp.wav.srt\");\n                    rawResponsePath = `${subtitlePath}.openai.json`;\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$prepareAudioForOpenAI(tempWavName)\n                    ];\n                case 1:\n                    preparedAudio = _state.sent();\n                    streamHandler = $f2bd40ec63a26367$var$createOpenAIStreamHandler(subtitlePath, rawResponsePath);\n                    _state.label = 2;\n                case 2:\n                    _state.trys.push([\n                        2,\n                        ,\n                        6,\n                        8\n                    ]);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$executeOpenAIStreamingRequest(preparedAudio, streamHandler)\n                    ];\n                case 3:\n                    _state.sent();\n                    return [\n                        4,\n                        streamHandler.waitForFlush()\n                    ];\n                case 4:\n                    _state.sent();\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$persistSubtitleCopy(subtitlePath, sourceMediaPath)\n                    ];\n                case 5:\n                    _state.sent();\n                    $f2bd40ec63a26367$var$console.log(\"[Whisperina] OpenAI transcription finished.\");\n                    return [\n                        2,\n                        subtitlePath\n                    ];\n                case 6:\n                    return [\n                        4,\n                        streamHandler.waitForFlush().catch(function() {})\n                    ];\n                case 7:\n                    _state.sent();\n                    return [\n                        7\n                    ];\n                case 8:\n                    return [\n                        2\n                    ];\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$streamTranscription(serverInfo, wavPath, subtitlePath) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var monitor, transcriptionError, finalSrt, error;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    monitor = $f2bd40ec63a26367$var$startLogMonitor(serverInfo.logPath, subtitlePath);\n                    $f2bd40ec63a26367$var$console.log(\"[Whisperina] Streaming captions from whisper-server log output.\");\n                    transcriptionError = null;\n                    _state.label = 1;\n                case 1:\n                    _state.trys.push([\n                        1,\n                        4,\n                        ,\n                        6\n                    ]);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$requestTranscriptionFromServer(serverInfo, wavPath)\n                    ];\n                case 2:\n                    finalSrt = _state.sent();\n                    return [\n                        4,\n                        monitor.finalize(finalSrt)\n                    ];\n                case 3:\n                    _state.sent();\n                    return [\n                        3,\n                        6\n                    ];\n                case 4:\n                    error = _state.sent();\n                    transcriptionError = error;\n                    return [\n                        4,\n                        monitor.finalize(null)\n                    ];\n                case 5:\n                    _state.sent();\n                    return [\n                        3,\n                        6\n                    ];\n                case 6:\n                    if (transcriptionError) throw transcriptionError;\n                    return [\n                        2\n                    ];\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$reloadSubtitleTrack(subtitlePath) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            try {\n                $f2bd40ec63a26367$var$core.subtitle.loadTrack(subtitlePath);\n            } catch (error) {\n                $f2bd40ec63a26367$var$console.warn(`Failed to reload subtitle track: ${error.message}`);\n            }\n            return [\n                2\n            ];\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$export$15fc2836d2d9603() {\n    var modeRaw = $f2bd40ec63a26367$var$preferences.get(\"transcriber_mode\");\n    var mode = (modeRaw === undefined || modeRaw === null ? \"whisper_server\" : `${modeRaw}`).trim().toLowerCase();\n    return mode === \"openai\";\n}\nfunction $f2bd40ec63a26367$var$prepareAudioForOpenAI(wavPath) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var currentSize, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, profile, outputPath, newSize, err;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$statFileSize(wavPath)\n                    ];\n                case 1:\n                    currentSize = _state.sent();\n                    $f2bd40ec63a26367$var$console.log(`[Whisperina][OpenAI] Source WAV size: ${(currentSize / 1048576).toFixed(2)} MB.`);\n                    if (currentSize <= $f2bd40ec63a26367$var$OPENAI_SIZE_LIMIT_BYTES) return [\n                        2,\n                        {\n                            path: wavPath,\n                            mime: \"audio/wav\"\n                        }\n                    ];\n                    _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                    _state.label = 2;\n                case 2:\n                    _state.trys.push([\n                        2,\n                        8,\n                        9,\n                        10\n                    ]);\n                    _iterator = $f2bd40ec63a26367$var$OPENAI_AUDIO_PROFILES[Symbol.iterator]();\n                    _state.label = 3;\n                case 3:\n                    if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                        3,\n                        7\n                    ];\n                    profile = _step.value;\n                    outputPath = $f2bd40ec63a26367$var$utils.resolvePath(`@tmp/whisper_tmp_openai.${profile.ext}`);\n                    $f2bd40ec63a26367$var$console.log(`[Whisperina][OpenAI] WAV exceeds 25 MB, re-encoding using ${profile.description}.`);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$convertAudioWithFfmpeg(wavPath, outputPath, profile)\n                    ];\n                case 4:\n                    _state.sent();\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$statFileSize(outputPath)\n                    ];\n                case 5:\n                    newSize = _state.sent();\n                    $f2bd40ec63a26367$var$console.log(`[Whisperina][OpenAI] ${profile.ext.toUpperCase()} size: ${(newSize / 1048576).toFixed(2)} MB.`);\n                    if (newSize <= $f2bd40ec63a26367$var$OPENAI_SIZE_LIMIT_BYTES) {\n                        $f2bd40ec63a26367$var$console.log(`[Whisperina][OpenAI] Selected ${profile.description} for upload.`);\n                        return [\n                            2,\n                            {\n                                path: outputPath,\n                                mime: profile.mime\n                            }\n                        ];\n                    }\n                    $f2bd40ec63a26367$var$console.log(`[Whisperina][OpenAI] ${profile.description} still exceeds 25 MB, trying next profile...`);\n                    _state.label = 6;\n                case 6:\n                    _iteratorNormalCompletion = true;\n                    return [\n                        3,\n                        3\n                    ];\n                case 7:\n                    return [\n                        3,\n                        10\n                    ];\n                case 8:\n                    err = _state.sent();\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                    return [\n                        3,\n                        10\n                    ];\n                case 9:\n                    try {\n                        if (!_iteratorNormalCompletion && _iterator.return != null) {\n                            _iterator.return();\n                        }\n                    } finally{\n                        if (_didIteratorError) {\n                            throw _iteratorError;\n                        }\n                    }\n                    return [\n                        7\n                    ];\n                case 10:\n                    throw new Error(\"Audio file is still larger than 25 MB even after trying high-compression profiles. Please trim the media or lower its quality.\");\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$statFileSize(path) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var output, size;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$execWrapped(\"/usr/bin/stat\", [\n                            \"-f\",\n                            \"%z\",\n                            path\n                        ], null, {\n                            silent: true\n                        })\n                    ];\n                case 1:\n                    output = _state.sent();\n                    size = parseInt(output.trim(), 10);\n                    return [\n                        2,\n                        Number.isFinite(size) ? size : 0\n                    ];\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$convertAudioWithFfmpeg(inputPath, outputPath, codecOptions) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var args;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    args = [\n                        '-y',\n                        '-i',\n                        inputPath\n                    ].concat(codecOptions.ffmpegArgs || []).concat([\n                        outputPath\n                    ]);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$execWrapped($f2bd40ec63a26367$var$getFfmpegPath(), args)\n                    ];\n                case 1:\n                    _state.sent();\n                    return [\n                        2,\n                        outputPath\n                    ];\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$executeOpenAIStreamingRequest(upload, handler) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var apiKey, baseUrl, model, responseFormat, chunkingStrategy, args, result;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    apiKey = ($f2bd40ec63a26367$var$preferences.get(\"openai_api_key\") || \"\").trim();\n                    if (!apiKey) throw new Error(\"OpenAI API key is not configured. Please update the preferences page.\");\n                    baseUrl = ($f2bd40ec63a26367$var$preferences.get(\"openai_base_url\") || \"https://api.openai.com/v1/audio/transcriptions\").trim();\n                    model = ($f2bd40ec63a26367$var$preferences.get(\"openai_model\") || \"gpt-4o-transcribe-diarize\").trim();\n                    responseFormat = ($f2bd40ec63a26367$var$preferences.get(\"openai_response_format\") || \"json\").trim();\n                    chunkingStrategy = ($f2bd40ec63a26367$var$preferences.get(\"openai_chunking_strategy\") || \"\").trim();\n                    $f2bd40ec63a26367$var$console.log(`[Whisperina][OpenAI] Streaming request -> model=${model}, response_format=${responseFormat}, chunking=${chunkingStrategy || \"default\"}, endpoint=${baseUrl}`);\n                    args = [\n                        \"curl\",\n                        \"-sN\",\n                        \"-X\",\n                        \"POST\",\n                        baseUrl,\n                        \"-H\",\n                        `Authorization: Bearer ${apiKey}`,\n                        \"-H\",\n                        \"Accept: text/event-stream\",\n                        \"-F\",\n                        `file=@${upload.path}`,\n                        \"-F\",\n                        `model=${model}`,\n                        \"-F\",\n                        `response_format=${responseFormat}`,\n                        \"-F\",\n                        \"stream=true\"\n                    ];\n                    if (chunkingStrategy) args.push(\"-F\", `chunking_strategy=${chunkingStrategy}`);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$utils.exec(\"/usr/bin/env\", args, null, handler.handleChunk, handler.handleError)\n                    ];\n                case 1:\n                    result = _state.sent();\n                    handler.finalize();\n                    if (result.status !== 0) throw new Error(`OpenAI streaming request failed (status ${result.status}). Check your API key, quota, or model settings.`);\n                    return [\n                        2\n                    ];\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$createOpenAIStreamHandler(subtitlePath, rawResponsePath) {\n    var buffer = \"\";\n    var segments = [];\n    var segmentMap = new Map();\n    var writeChain = Promise.resolve();\n    var rawEvents = [];\n    var rawLogReported = false;\n    var rawText = \"\";\n    function nowIso() {\n        return new Date().toISOString();\n    }\n    function recordRawEvent(payload) {\n        var entry = {\n            timestamp: nowIso(),\n            payload: payload\n        };\n        rawEvents.push(entry);\n        return entry;\n    }\n    function writeRawDump() {\n        if (!rawResponsePath) return;\n        try {\n            var dump = {\n                generated_at: nowIso(),\n                raw_text: rawText,\n                events: rawEvents\n            };\n            $f2bd40ec63a26367$var$file.write(rawResponsePath, JSON.stringify(dump, null, 2));\n            if (!rawLogReported) {\n                rawLogReported = true;\n                $f2bd40ec63a26367$var$console.log(`[Whisperina][OpenAI] Saved raw streaming response to ${rawResponsePath}`);\n            }\n        } catch (error) {\n            $f2bd40ec63a26367$var$console.warn(`Failed to write raw OpenAI response: ${error.message}`);\n        }\n    }\n    function handleChunk(data) {\n        var chunk = $f2bd40ec63a26367$var$coerceChunkToString(data);\n        if (!chunk) return;\n        rawText += chunk;\n        buffer += chunk;\n        processBuffer();\n    }\n    function handleError(data) {\n        if (data && data.trim().length > 0) $f2bd40ec63a26367$var$console.warn(`OpenAI stream stderr: ${data}`);\n    }\n    function finalize() {\n        processBuffer(true);\n        writeRawDump();\n    }\n    function processBuffer() {\n        var force = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;\n        var newlineIndex;\n        while((newlineIndex = buffer.indexOf(\"\\n\")) >= 0){\n            var line = buffer.slice(0, newlineIndex).trim();\n            buffer = buffer.slice(newlineIndex + 1);\n            processLine(line);\n        }\n        if (force && buffer.trim().length > 0) {\n            processLine(buffer.trim());\n            buffer = \"\";\n        }\n    }\n    function processLine(line) {\n        if (!line || line.startsWith(\":\")) return;\n        if (!line.startsWith(\"data:\")) return;\n        var payload = line.slice(5).trim();\n        var debugEntry = recordRawEvent(payload);\n        if (!payload || payload === \"[DONE]\") return;\n        var event;\n        try {\n            event = JSON.parse(payload);\n            debugEntry.parsed = event;\n        } catch (error) {\n            debugEntry.parse_error = error.message;\n            $f2bd40ec63a26367$var$console.warn(`Unable to parse OpenAI SSE payload: ${error.message}`);\n            return;\n        }\n        handleEvent(event);\n    }\n    function handleEvent(event) {\n        if (!event || typeof event !== \"object\") return;\n        if (event.type === \"transcript.text.segment\" && event.segment) {\n            if (upsertSegment(event.segment)) scheduleFlush();\n        } else if (event.type === \"transcript.text.done\") {\n            if (Array.isArray(event.segments) && event.segments.length > 0) {\n                segments.length = 0;\n                segmentMap.clear();\n                event.segments.forEach(function(segment) {\n                    return upsertSegment(segment, {\n                        skipFlush: true\n                    });\n                });\n                scheduleFlush();\n            } else if (typeof event.text === \"string\") setTextOnly(event.text);\n            $f2bd40ec63a26367$var$console.log(`[Whisperina][OpenAI] Received final transcript with ${segments.length} segment(s).`);\n        } else if (event.type === \"transcript.text.delta\" && typeof event.delta === \"string\") setTextOnly(event.delta, {\n            append: true\n        });\n        else if (event.type === \"response.error\" && event.error) $f2bd40ec63a26367$var$console.error(`OpenAI response error: ${event.error.message || \"unknown error\"}`);\n    }\n    function upsertSegment(rawSegment) {\n        var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n        var normalized = normalizeOpenAISegment(rawSegment);\n        if (!normalized) return false;\n        var existingIndex = segmentMap.has(normalized.id) ? segmentMap.get(normalized.id) : -1;\n        if (existingIndex >= 0) segments[existingIndex] = normalized;\n        else {\n            segmentMap.set(normalized.id, segments.length);\n            segments.push(normalized);\n            segments.sort(function(a, b) {\n                return a.startMs - b.startMs;\n            });\n            segments.forEach(function(segment, index) {\n                return segmentMap.set(segment.id, index);\n            });\n        }\n        if (!options.skipFlush) scheduleFlush();\n        return true;\n    }\n    function setTextOnly(text) {\n        var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n        var content = options.append && segments.length > 0 ? `${segments[segments.length - 1].textLines.join(\" \")} ${text}`.trim() : (text || \"\").trim();\n        if (!content) return;\n        var estimatedDuration = $f2bd40ec63a26367$var$getMediaDurationMs() || $f2bd40ec63a26367$var$estimateDurationFromText(content);\n        segments.length = 0;\n        segmentMap.clear();\n        segments.push({\n            id: \"text-only\",\n            startMs: 0,\n            endMs: estimatedDuration,\n            textLines: $f2bd40ec63a26367$var$splitTextIntoLines(content)\n        });\n        segmentMap.set(\"text-only\", 0);\n        scheduleFlush();\n    }\n    function scheduleFlush() {\n        writeChain = writeChain.then(function() {\n            return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n                var rendered;\n                return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n                    switch(_state.label){\n                        case 0:\n                            writeRawDump();\n                            rendered = $f2bd40ec63a26367$var$renderSegmentsToSrt(segments);\n                            $f2bd40ec63a26367$var$file.write(subtitlePath, rendered);\n                            return [\n                                4,\n                                $f2bd40ec63a26367$var$reloadSubtitleTrack(subtitlePath)\n                            ];\n                        case 1:\n                            _state.sent();\n                            return [\n                                2\n                            ];\n                    }\n                });\n            })();\n        }).catch(function(error) {\n            $f2bd40ec63a26367$var$console.warn(`Failed to update  streaming subtitles: ${error.message}`);\n        });\n        return writeChain;\n    }\n    function normalizeOpenAISegment(segment) {\n        if (!segment) return null;\n        var text = (segment.text || \"\").trim();\n        if (!text) return null;\n        var _segment_start, _ref;\n        var startMs = $f2bd40ec63a26367$var$secondsToMs((_ref = (_segment_start = segment.start) !== null && _segment_start !== void 0 ? _segment_start : segment.start_time) !== null && _ref !== void 0 ? _ref : 0);\n        var _segment_end, _ref1;\n        var endMs = $f2bd40ec63a26367$var$secondsToMs((_ref1 = (_segment_end = segment.end) !== null && _segment_end !== void 0 ? _segment_end : segment.end_time) !== null && _ref1 !== void 0 ? _ref1 : startMs + 2);\n        var id = segment.id || `${startMs}-${endMs}-${text.length}`;\n        return {\n            id: id,\n            startMs: startMs,\n            endMs: endMs,\n            textLines: $f2bd40ec63a26367$var$splitTextIntoLines(text)\n        };\n    }\n    return {\n        handleChunk: handleChunk,\n        handleError: handleError,\n        finalize: finalize,\n        waitForFlush () {\n            return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n                return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n                    switch(_state.label){\n                        case 0:\n                            return [\n                                4,\n                                writeChain\n                            ];\n                        case 1:\n                            _state.sent();\n                            writeRawDump();\n                            $f2bd40ec63a26367$var$console.log(`[Whisperina][OpenAI] Subtitle file flushed with ${segments.length} segment(s).`);\n                            return [\n                                2\n                            ];\n                    }\n                });\n            })();\n        }\n    };\n}\nfunction $f2bd40ec63a26367$var$coerceChunkToString(data) {\n    if (data === undefined || data === null) return \"\";\n    if (typeof data === \"string\") return data;\n    if (typeof data === \"object\") try {\n        if (typeof data.string === \"function\") {\n            var strValue = data.string();\n            if (typeof strValue === \"string\") return strValue;\n        }\n        if (typeof data.toString === \"function\") {\n            var repr = data.toString();\n            if (typeof repr === \"string\" && repr !== \"[object Object]\") return repr;\n        }\n        var json = JSON.stringify(data);\n        if (typeof json === \"string\") return json;\n    } catch (error) {\n        $f2bd40ec63a26367$var$console.warn(`Failed to convert stream chunk to string: ${error.message}`);\n    }\n    return `${data}`;\n}\nfunction $f2bd40ec63a26367$var$startLogMonitor(logPath, subtitlePath) {\n    var seen = new Set();\n    var segments = [];\n    var stopRequested = false;\n    $f2bd40ec63a26367$var$console.log(`[Whisperina] Monitoring whisper-server log at ${logPath}.`);\n    var loopPromise = function() {\n        return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n            var updated, rendered, error;\n            return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!!stopRequested) return [\n                            3,\n                            7\n                        ];\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        updated = $f2bd40ec63a26367$var$collectNewSegments(logPath, seen, segments);\n                        if (!updated) return [\n                            3,\n                            3\n                        ];\n                        rendered = $f2bd40ec63a26367$var$renderSegmentsToSrt(segments);\n                        $f2bd40ec63a26367$var$file.write(subtitlePath, rendered);\n                        return [\n                            4,\n                            $f2bd40ec63a26367$var$reloadSubtitleTrack(subtitlePath)\n                        ];\n                    case 2:\n                        _state.sent();\n                        _state.label = 3;\n                    case 3:\n                        return [\n                            3,\n                            5\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        $f2bd40ec63a26367$var$console.warn(`Log monitor error: ${error.message}`);\n                        return [\n                            3,\n                            5\n                        ];\n                    case 5:\n                        return [\n                            4,\n                            $f2bd40ec63a26367$var$sleep($f2bd40ec63a26367$var$LOG_POLL_INTERVAL_MS)\n                        ];\n                    case 6:\n                        _state.sent();\n                        return [\n                            3,\n                            0\n                        ];\n                    case 7:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    }();\n    return {\n        finalize (finalSrt) {\n            return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n                return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n                    switch(_state.label){\n                        case 0:\n                            stopRequested = true;\n                            return [\n                                4,\n                                loopPromise\n                            ];\n                        case 1:\n                            _state.sent();\n                            if (!finalSrt) return [\n                                3,\n                                3\n                            ];\n                            $f2bd40ec63a26367$var$file.write(subtitlePath, finalSrt);\n                            return [\n                                4,\n                                $f2bd40ec63a26367$var$reloadSubtitleTrack(subtitlePath)\n                            ];\n                        case 2:\n                            _state.sent();\n                            _state.label = 3;\n                        case 3:\n                            return [\n                                2\n                            ];\n                    }\n                });\n            })();\n        }\n    };\n}\nfunction $f2bd40ec63a26367$var$collectNewSegments(logPath, seen, segments) {\n    if (!logPath || !$f2bd40ec63a26367$var$file.exists(logPath)) return false;\n    var content = $f2bd40ec63a26367$var$file.read(logPath) || \"\";\n    if (!content) return false;\n    var lines = content.split(/\\r?\\n/);\n    var updated = false;\n    var addedCount = 0;\n    var _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n    try {\n        for(var _iterator = lines[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true){\n            var rawLine = _step.value;\n            var line = rawLine.trim();\n            if (!line) continue;\n            var match = $f2bd40ec63a26367$var$LOG_SEGMENT_REGEX.exec(line);\n            if (!match) continue;\n            var _match = (0, $d237cff101338c18$export$71511d61b312f219)(match, 4), start = _match[1], end = _match[2], textRaw = _match[3];\n            var text = textRaw.trim();\n            var key = `${start}|${end}|${text}`;\n            if (seen.has(key)) continue;\n            seen.add(key);\n            segments.push({\n                timing: `${$f2bd40ec63a26367$var$convertLogTimestamp(start)} --> ${$f2bd40ec63a26367$var$convertLogTimestamp(end)}`,\n                text: [\n                    text\n                ]\n            });\n            updated = true;\n            addedCount += 1;\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally{\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n            }\n        } finally{\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n    if (updated) $f2bd40ec63a26367$var$console.log(`[Whisperina] Added ${addedCount} new whisper-server segments (total=${segments.length}).`);\n    return updated;\n}\nfunction $f2bd40ec63a26367$var$convertLogTimestamp(value) {\n    if (!value) return \"00:00:00,000\";\n    var _value_split = (0, $d237cff101338c18$export$71511d61b312f219)(value.split(\".\"), 2), tmp = _value_split[0], whole = tmp === void 0 ? \"\" : tmp, tmp1 = _value_split[1], fractional = tmp1 === void 0 ? \"000\" : tmp1;\n    var frac = (fractional + \"000\").slice(0, 3);\n    return `${whole},${frac}`;\n}\nfunction $f2bd40ec63a26367$var$startWhisperServer(modelName) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var serverPath, host, port, logPath, args, command, stdout, pid, serverInfo, error;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    serverPath = $f2bd40ec63a26367$var$getWhisperServerPath();\n                    host = $f2bd40ec63a26367$var$preferences.get(\"wserver_host\") || \"127.0.0.1\";\n                    port = parseInt($f2bd40ec63a26367$var$preferences.get(\"wserver_port\"), 10) || 17896;\n                    logPath = $f2bd40ec63a26367$var$utils.resolvePath(\"@tmp/whisper_server.log\");\n                    args = [\n                        '-m',\n                        `${$f2bd40ec63a26367$var$DATA}/ggml-${modelName}.bin`,\n                        '--host',\n                        host,\n                        '--port',\n                        `${port}`\n                    ].concat($f2bd40ec63a26367$var$getServerOptions());\n                    command = `${$f2bd40ec63a26367$var$shellEscape(serverPath)} ${args.map($f2bd40ec63a26367$var$shellEscape).join(\" \")} > ${$f2bd40ec63a26367$var$shellEscape(logPath)} 2>&1 & echo $!`;\n                    $f2bd40ec63a26367$var$console.log(`[Whisperina] Launching whisper-server via: ${command}`);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$execWrapped(\"/bin/sh\", [\n                            \"-c\",\n                            command\n                        ], null, {\n                            silent: true\n                        })\n                    ];\n                case 1:\n                    stdout = _state.sent();\n                    pid = parseInt(stdout.trim().split(\"\\n\").pop() || \"\", 10);\n                    if (!Number.isFinite(pid)) throw new Error(\"Unable to start whisper-server. Check your server path and options.\");\n                    serverInfo = {\n                        pid: pid,\n                        host: host,\n                        port: port,\n                        baseUrl: `http://${host}:${port}`,\n                        logPath: logPath\n                    };\n                    $f2bd40ec63a26367$var$activeServerInfo = serverInfo;\n                    $f2bd40ec63a26367$var$rememberServerPid(pid);\n                    _state.label = 2;\n                case 2:\n                    _state.trys.push([\n                        2,\n                        4,\n                        ,\n                        6\n                    ]);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$waitForServerReady(serverInfo.baseUrl)\n                    ];\n                case 3:\n                    _state.sent();\n                    $f2bd40ec63a26367$var$console.log(\"[Whisperina] whisper-server reported healthy.\");\n                    return [\n                        3,\n                        6\n                    ];\n                case 4:\n                    error = _state.sent();\n                    $f2bd40ec63a26367$var$console.error(`Failed to start whisper-server (log: ${logPath})`);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$stopWhisperServer(serverInfo)\n                    ];\n                case 5:\n                    _state.sent();\n                    throw error;\n                case 6:\n                    return [\n                        2,\n                        serverInfo\n                    ];\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$waitForServerReady(baseUrl) {\n    var timeoutMs = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 20000;\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var healthUrl, deadline, lastError, response, error, reason;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    healthUrl = `${baseUrl}/health`;\n                    deadline = Date.now() + timeoutMs;\n                    _state.label = 1;\n                case 1:\n                    if (!(Date.now() < deadline)) return [\n                        3,\n                        7\n                    ];\n                    _state.label = 2;\n                case 2:\n                    _state.trys.push([\n                        2,\n                        4,\n                        ,\n                        5\n                    ]);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$http.get(healthUrl)\n                    ];\n                case 3:\n                    response = _state.sent();\n                    if (response.statusCode === 200) return [\n                        2\n                    ];\n                    lastError = new Error(`Unexpected server status: ${response.statusCode}`);\n                    return [\n                        3,\n                        5\n                    ];\n                case 4:\n                    error = _state.sent();\n                    lastError = error;\n                    return [\n                        3,\n                        5\n                    ];\n                case 5:\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$sleep(300)\n                    ];\n                case 6:\n                    _state.sent();\n                    return [\n                        3,\n                        1\n                    ];\n                case 7:\n                    reason = lastError ? lastError.message : \"unknown\";\n                    throw new Error(`Timed out waiting for whisper-server to become ready (${reason}).`);\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$requestTranscriptionFromServer(serverInfo, wavPath) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var inferenceUrl, stdout;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    inferenceUrl = `${serverInfo.baseUrl}/inference`;\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$execWrapped(\"/usr/bin/env\", [\n                            \"curl\",\n                            \"-sS\",\n                            \"-f\",\n                            \"-X\",\n                            \"POST\",\n                            \"-F\",\n                            `file=@${wavPath}`,\n                            \"-F\",\n                            \"response_format=srt\",\n                            inferenceUrl\n                        ], null, {\n                            silent: true\n                        })\n                    ];\n                case 1:\n                    stdout = _state.sent();\n                    return [\n                        2,\n                        stdout\n                    ];\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$stopWhisperServer(serverInfo) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var info, recordedPid, pid, error, error1;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    info = serverInfo || $f2bd40ec63a26367$var$activeServerInfo;\n                    recordedPid = $f2bd40ec63a26367$var$readRecordedServerPid();\n                    pid = (info === null || info === void 0 ? void 0 : info.pid) || recordedPid;\n                    if (!pid) {\n                        $f2bd40ec63a26367$var$clearRecordedServerPid();\n                        return [\n                            2\n                        ];\n                    }\n                    _state.label = 1;\n                case 1:\n                    _state.trys.push([\n                        1,\n                        4,\n                        ,\n                        5\n                    ]);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$utils.exec(\"/bin/kill\", [\n                            \"-TERM\",\n                            `${pid}`\n                        ])\n                    ];\n                case 2:\n                    _state.sent();\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$sleep(200)\n                    ];\n                case 3:\n                    _state.sent();\n                    return [\n                        3,\n                        5\n                    ];\n                case 4:\n                    error = _state.sent();\n                    if (!/No such process/i.test((error === null || error === void 0 ? void 0 : error.message) || \"\")) $f2bd40ec63a26367$var$console.warn(`Failed to terminate whisper-server (pid ${pid}): ${error.message}`);\n                    return [\n                        3,\n                        5\n                    ];\n                case 5:\n                    _state.trys.push([\n                        5,\n                        7,\n                        ,\n                        8\n                    ]);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$utils.exec(\"/bin/kill\", [\n                            \"-KILL\",\n                            `${pid}`\n                        ])\n                    ];\n                case 6:\n                    _state.sent();\n                    return [\n                        3,\n                        8\n                    ];\n                case 7:\n                    error1 = _state.sent();\n                    if (!/No such process/i.test((error1 === null || error1 === void 0 ? void 0 : error1.message) || \"\")) $f2bd40ec63a26367$var$console.warn(`Failed to force-stop whisper-server (pid ${pid}): ${error1.message}`);\n                    return [\n                        3,\n                        8\n                    ];\n                case 8:\n                    if ($f2bd40ec63a26367$var$activeServerInfo && $f2bd40ec63a26367$var$activeServerInfo.pid === pid) $f2bd40ec63a26367$var$activeServerInfo = null;\n                    $f2bd40ec63a26367$var$clearRecordedServerPid();\n                    return [\n                        2\n                    ];\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$persistSubtitleCopy(subtitlePath, mediaFile) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n        var archiveDir, archiveName, destination, error;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    archiveDir = $f2bd40ec63a26367$var$resolveArchiveDirectory();\n                    if (!archiveDir) return [\n                        2\n                    ];\n                    _state.label = 1;\n                case 1:\n                    _state.trys.push([\n                        1,\n                        4,\n                        ,\n                        5\n                    ]);\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$execWrapped(\"/bin/mkdir\", [\n                            \"-p\",\n                            archiveDir\n                        ])\n                    ];\n                case 2:\n                    _state.sent();\n                    archiveName = `${$f2bd40ec63a26367$var$sanitizeFileStem(mediaFile)}-${$f2bd40ec63a26367$var$formatTimestampSuffix()}.srt`;\n                    destination = `${archiveDir}/${archiveName}`;\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$execWrapped(\"/bin/cp\", [\n                            \"-f\",\n                            subtitlePath,\n                            destination\n                        ])\n                    ];\n                case 3:\n                    _state.sent();\n                    $f2bd40ec63a26367$var$console.log(`Stored subtitle copy at ${destination}`);\n                    return [\n                        3,\n                        5\n                    ];\n                case 4:\n                    error = _state.sent();\n                    $f2bd40ec63a26367$var$console.warn(`Failed to archive subtitle: ${error.message}`);\n                    return [\n                        3,\n                        5\n                    ];\n                case 5:\n                    return [\n                        2\n                    ];\n            }\n        });\n    })();\n}\nfunction $f2bd40ec63a26367$var$getServerOptions() {\n    return $f2bd40ec63a26367$var$parseArgumentList($f2bd40ec63a26367$var$preferences.get(\"wserver_options\"));\n}\nfunction $f2bd40ec63a26367$var$getFfmpegPath() {\n    var ffmpegPath = $f2bd40ec63a26367$var$preferences.get(\"ffmpeg_path\");\n    if (!$f2bd40ec63a26367$var$utils.fileInPath(ffmpegPath)) throw new Error(`Unable to locate ffmpeg executable at: ${ffmpegPath}. Check the preference page for more details.`);\n    return ffmpegPath;\n}\nfunction $f2bd40ec63a26367$var$getPluginHomePath() {\n    var PLUGIN_NAME = 'io.github.yuxiqian.whisperina.iinaplugin';\n    var PLUGIN_NAME_DEV = 'whisperina.iinaplugin-dev';\n    if ($f2bd40ec63a26367$var$utils.fileInPath($f2bd40ec63a26367$var$HOME_PATH + PLUGIN_NAME)) return $f2bd40ec63a26367$var$utils.resolvePath($f2bd40ec63a26367$var$HOME_PATH + PLUGIN_NAME);\n    else if ($f2bd40ec63a26367$var$utils.fileInPath($f2bd40ec63a26367$var$HOME_PATH + PLUGIN_NAME_DEV)) return $f2bd40ec63a26367$var$utils.resolvePath($f2bd40ec63a26367$var$HOME_PATH + PLUGIN_NAME_DEV);\n    else throw new Error(\"Unable to locate plugin folder.\");\n}\nfunction $f2bd40ec63a26367$var$getPluginDataPath() {\n    return $f2bd40ec63a26367$var$utils.resolvePath(\"@data/\");\n}\nfunction $f2bd40ec63a26367$var$getServerPidPath() {\n    try {\n        return $f2bd40ec63a26367$var$utils.resolvePath($f2bd40ec63a26367$var$SERVER_PID_FILE);\n    } catch (error) {\n        $f2bd40ec63a26367$var$console.warn(`Unable to resolve server PID file: ${error.message}`);\n        return null;\n    }\n}\nfunction $f2bd40ec63a26367$var$rememberServerPid(pid) {\n    var pidPath = $f2bd40ec63a26367$var$getServerPidPath();\n    if (!pidPath) return;\n    try {\n        $f2bd40ec63a26367$var$file.write(pidPath, `${pid}`);\n    } catch (error) {\n        $f2bd40ec63a26367$var$console.warn(`Unable to record whisper-server pid: ${error.message}`);\n    }\n}\nfunction $f2bd40ec63a26367$var$clearRecordedServerPid() {\n    var pidPath = $f2bd40ec63a26367$var$getServerPidPath();\n    if (!pidPath) return;\n    try {\n        if ($f2bd40ec63a26367$var$file.exists(pidPath)) $f2bd40ec63a26367$var$file.delete(pidPath);\n    } catch (error) {\n        $f2bd40ec63a26367$var$console.warn(`Unable to remove PID record: ${error.message}`);\n    }\n}\nfunction $f2bd40ec63a26367$var$readRecordedServerPid() {\n    var pidPath = $f2bd40ec63a26367$var$getServerPidPath();\n    if (!pidPath) return null;\n    try {\n        if (!$f2bd40ec63a26367$var$file.exists(pidPath)) return null;\n        var content = $f2bd40ec63a26367$var$file.read(pidPath);\n        var pid = parseInt((content || \"\").trim(), 10);\n        return Number.isFinite(pid) ? pid : null;\n    } catch (error) {\n        $f2bd40ec63a26367$var$console.warn(`Unable to read PID record: ${error.message}`);\n        return null;\n    }\n}\nfunction $f2bd40ec63a26367$var$renderSegmentsToSrt(segments) {\n    if (!segments || segments.length === 0) return \"\";\n    var normalized = segments.map($f2bd40ec63a26367$var$normalizeRenderableSegment).filter(Boolean);\n    if (normalized.length === 0) return \"\";\n    normalized.sort(function(a, b) {\n        return a.startMs - b.startMs;\n    });\n    var lines = [];\n    normalized.forEach(function(segment, index) {\n        lines.push(String(index + 1));\n        lines.push(`${$f2bd40ec63a26367$var$formatTimestamp(segment.startMs)} --> ${$f2bd40ec63a26367$var$formatTimestamp(segment.endMs)}`);\n        segment.textLines.forEach(function(textLine) {\n            return lines.push(textLine);\n        });\n        lines.push(\"\");\n    });\n    return lines.join(\"\\n\");\n}\nfunction $f2bd40ec63a26367$var$normalizeRenderableSegment(segment) {\n    var _Math;\n    if (!segment) return null;\n    if (segment.timing) {\n        var _segment_timing_split = (0, $d237cff101338c18$export$71511d61b312f219)(segment.timing.split(/\\s+-->\\s+/), 2), startRaw = _segment_timing_split[0], endRaw = _segment_timing_split[1];\n        return {\n            startMs: $f2bd40ec63a26367$var$parseTimestampMs(startRaw),\n            endMs: $f2bd40ec63a26367$var$parseTimestampMs(endRaw),\n            textLines: Array.isArray(segment.text) ? segment.text : Array.isArray(segment.textLines) ? segment.textLines : [\n                segment.text || \"\"\n            ]\n        };\n    }\n    var startMs = typeof segment.startMs === \"number\" ? segment.startMs : 0;\n    var endMsCandidates = [\n        segment.endMs,\n        startMs + $f2bd40ec63a26367$var$estimateDurationFromTextLines(segment.textLines || segment.text || [])\n    ].filter(function(value) {\n        return typeof value === \"number\" && value > startMs;\n    });\n    var endMs = endMsCandidates.length > 0 ? (_Math = Math).max.apply(_Math, (0, $4bd9c20251de0dba$export$71511d61b312f219)(endMsCandidates)) : startMs + 2000;\n    var textLines = Array.isArray(segment.textLines) ? segment.textLines : Array.isArray(segment.text) ? segment.text : [\n        segment.text || \"\"\n    ];\n    var filtered = textLines.filter(function(line) {\n        return typeof line === \"string\" ? line.trim().length > 0 : false;\n    });\n    return {\n        startMs: startMs,\n        endMs: endMs,\n        textLines: filtered.length > 0 ? filtered : [\n            \"\"\n        ]\n    };\n}\nfunction $f2bd40ec63a26367$var$resolveArchiveDirectory() {\n    var configured = $f2bd40ec63a26367$var$preferences.get(\"subtitle_archive_dir\");\n    if (!configured) return null;\n    try {\n        return $f2bd40ec63a26367$var$utils.resolvePath(configured);\n    } catch (error) {\n        $f2bd40ec63a26367$var$console.warn(`Unable to resolve archive directory \"${configured}\": ${error.message}`);\n        return null;\n    }\n}\nfunction $f2bd40ec63a26367$var$sanitizeFileStem(filePath) {\n    if (!filePath) return \"subtitle\";\n    var normalized = filePath.replace(/\\\\/g, \"/\");\n    var baseName = normalized.substring(normalized.lastIndexOf(\"/\") + 1) || \"subtitle\";\n    var stem = baseName.replace(/\\.[^/.]+$/, \"\") || \"subtitle\";\n    return stem.replace(/[^A-Za-z0-9._-]+/g, \"_\") || \"subtitle\";\n}\nfunction $f2bd40ec63a26367$var$formatTimestampSuffix() {\n    var date = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : new Date();\n    var pad = function(value) {\n        return String(value).padStart(2, \"0\");\n    };\n    return `${date.getFullYear()}${pad(date.getMonth() + 1)}${pad(date.getDate())}-${pad(date.getHours())}${pad(date.getMinutes())}${pad(date.getSeconds())}`;\n}\nfunction $f2bd40ec63a26367$var$shellEscape(value) {\n    if (value === undefined || value === null) return \"''\";\n    var str = String(value);\n    if (/^[A-Za-z0-9_\\/.:=-]+$/.test(str)) return str;\n    return `'${str.replace(/'/g, `'\\\\''`)}'`;\n}\nfunction $f2bd40ec63a26367$var$parseArgumentList(rawValue) {\n    if (!rawValue) return [];\n    try {\n        var parsed = (0, $c4f3a659ba179370$export$98e6a39c04603d36)(rawValue);\n        if (!Array.isArray(parsed) || parsed.length === 0) return [];\n        return parsed.filter(function(token) {\n            return typeof token === \"string\" && token.length > 0;\n        }).map(function(token) {\n            return `${token}`;\n        });\n    } catch (error) {\n        $f2bd40ec63a26367$var$console.warn(`Failed to parse option string \"${rawValue}\": ${error.message}`);\n        return [];\n    }\n}\nfunction $f2bd40ec63a26367$var$sleep(ms) {\n    return new Promise(function(resolve) {\n        return setTimeout(resolve, ms);\n    });\n}\nfunction $f2bd40ec63a26367$var$getMediaDurationMs() {\n    var _core_status;\n    var duration = $f2bd40ec63a26367$var$core === null || $f2bd40ec63a26367$var$core === void 0 ? void 0 : (_core_status = $f2bd40ec63a26367$var$core.status) === null || _core_status === void 0 ? void 0 : _core_status.duration;\n    if (typeof duration === \"number\" && duration > 0) return Math.floor(duration * 1000);\n    return null;\n}\nfunction $f2bd40ec63a26367$var$estimateDurationFromText(text) {\n    var words = (text || \"\").trim().split(/\\s+/).filter(Boolean).length;\n    var averageMsPerWord = 320; // ~187 wpm\n    return words > 0 ? words * averageMsPerWord : 4000;\n}\nfunction $f2bd40ec63a26367$var$estimateDurationFromTextLines(lines) {\n    if (!lines || lines.length === 0) return 2000;\n    var joined = Array.isArray(lines) ? lines.join(\" \") : String(lines);\n    return $f2bd40ec63a26367$var$estimateDurationFromText(joined);\n}\nfunction $f2bd40ec63a26367$var$splitTextIntoLines(text) {\n    if (!text) return [];\n    return text.split(/\\r?\\n/).map(function(line) {\n        return line.trim();\n    }).filter(Boolean);\n}\nfunction $f2bd40ec63a26367$var$secondsToMs(value) {\n    if (typeof value !== \"number\" || Number.isNaN(value)) return 0;\n    return Math.max(0, Math.round(value * 1000));\n}\nfunction $f2bd40ec63a26367$var$parseTimestampMs(value) {\n    var match = /^(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})$/.exec(value || \"\");\n    if (!match) return 0;\n    var _match = (0, $d237cff101338c18$export$71511d61b312f219)(match, 5), hh = _match[1], mm = _match[2], ss = _match[3], ms = _match[4];\n    return ((parseInt(hh, 10) * 60 + parseInt(mm, 10)) * 60 + parseInt(ss, 10)) * 1000 + parseInt(ms, 10);\n}\nfunction $f2bd40ec63a26367$var$formatTimestamp(ms) {\n    var clamped = Math.max(0, Math.floor(ms));\n    var hours = Math.floor(clamped / 3600000);\n    var minutes = Math.floor(clamped % 3600000 / 60000);\n    var seconds = Math.floor(clamped % 60000 / 1000);\n    var millis = clamped % 1000;\n    var pad = function(num) {\n        var len = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 2;\n        return String(num).padStart(len, \"0\");\n    };\n    return `${pad(hours)}:${pad(minutes)}:${pad(seconds)},${pad(millis, 3)}`;\n}\nfunction $f2bd40ec63a26367$var$execWrapped(_0, _1, _2) {\n    return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function(file, commands, cwd) {\n        var options, _ref, status, stdout, stderr;\n        var _arguments = arguments;\n        return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    options = _arguments.length > 3 && _arguments[3] !== void 0 ? _arguments[3] : {};\n                    return [\n                        4,\n                        $f2bd40ec63a26367$var$utils.exec(file, commands, cwd)\n                    ];\n                case 1:\n                    _ref = _state.sent(), status = _ref.status, stdout = _ref.stdout, stderr = _ref.stderr;\n                    if (!options.silent) {\n                        $f2bd40ec63a26367$var$console.log(status);\n                        $f2bd40ec63a26367$var$console.log(stdout);\n                        $f2bd40ec63a26367$var$console.log(stderr);\n                    }\n                    if (status !== 0) throw new Error(`Bad return status code: ${status}`);\n                    return [\n                        2,\n                        stdout\n                    ];\n            }\n        });\n    }).apply(this, arguments);\n}\nvar $f2bd40ec63a26367$var$HOME = $f2bd40ec63a26367$var$getPluginHomePath();\nvar $f2bd40ec63a26367$var$DATA = $f2bd40ec63a26367$var$getPluginDataPath();\nfunction $f2bd40ec63a26367$var$getWhisperServerPath() {\n    var serverPath = $f2bd40ec63a26367$var$preferences.get(\"wserver_path\");\n    if (!$f2bd40ec63a26367$var$utils.fileInPath(serverPath)) throw new Error(`Unable to locate whisper-server executable at: ${serverPath}. Check the preference page for more details.`);\n    return serverPath;\n}\n\n\nvar $7da9989b8341366f$var$subtitle = iina.subtitle, $7da9989b8341366f$var$preferences = iina.preferences, $7da9989b8341366f$var$console = iina.console;\n$7da9989b8341366f$var$subtitle.registerProvider(\"whisper\", {\n    search: function() {\n        return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n            return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n                $7da9989b8341366f$var$logCurrentSettings();\n                if ((0, $f2bd40ec63a26367$export$15fc2836d2d9603)()) return [\n                    2,\n                    [\n                        $7da9989b8341366f$var$subtitle.item({\n                            id: \"openai\",\n                            name: \"OpenAI Streaming\",\n                            size: \"cloud\",\n                            sha: \"n/a\",\n                            format: \"srt\"\n                        })\n                    ]\n                ];\n                return [\n                    2,\n                    (0, $ef9582840825dae1$export$8d63af86d795ece4)().map(function(model) {\n                        return $7da9989b8341366f$var$subtitle.item({\n                            id: model.name,\n                            name: model.name,\n                            size: model.size,\n                            sha: model.sha,\n                            format: \"srt\"\n                        });\n                    })\n                ];\n            });\n        })();\n    },\n    description: function(item) {\n        return {\n            name: item.data.id,\n            left: item.data.size,\n            right: item.data.sha\n        };\n    },\n    download: function(item) {\n        return (/*#__PURE__*/ 0, /*#__PURE__*/ $6008c95c713781eb$export$71511d61b312f219)(function() {\n            return (0, $18ac8221ad1dd540$export$67ebef60e6f28a6)(this, function(_state) {\n                return [\n                    2,\n                    Promise.resolve((0, $f2bd40ec63a26367$export$6479b296c537a758)(item.data.id))\n                ];\n            });\n        })();\n    }\n});\nfunction $7da9989b8341366f$var$logCurrentSettings() {\n    var mode = ($7da9989b8341366f$var$preferences.get(\"transcriber_mode\") || \"whisper_server\").toString();\n    if (mode === \"openai\") {\n        var model = $7da9989b8341366f$var$preferences.get(\"openai_model\") || \"gpt-4o-transcribe-diarize\";\n        var responseFormat = $7da9989b8341366f$var$preferences.get(\"openai_response_format\") || \"json\";\n        var chunking = $7da9989b8341366f$var$preferences.get(\"openai_chunking_strategy\") || \"auto\";\n        var endpoint = $7da9989b8341366f$var$preferences.get(\"openai_base_url\") || \"https://api.openai.com/v1/audio/transcriptions\";\n        $7da9989b8341366f$var$console.log(`[Whisperina] Provider search -> mode=openai, model=${model}, format=${responseFormat}, chunking=${chunking}, endpoint=${endpoint}`);\n    } else {\n        var serverPath = $7da9989b8341366f$var$preferences.get(\"wserver_path\") || \"(unset)\";\n        var host = $7da9989b8341366f$var$preferences.get(\"wserver_host\") || \"127.0.0.1\";\n        var port = $7da9989b8341366f$var$preferences.get(\"wserver_port\") || \"17896\";\n        $7da9989b8341366f$var$console.log(`[Whisperina] Provider search -> mode=whisper_server, path=${serverPath}, host=${host}, port=${port}`);\n    }\n}\n\n})();\n//# sourceMappingURL=index.js.map\n","'use strict';\n\nmodule.exports = function quote(xs) {\n\treturn xs.map(function (s) {\n\t\tif (s === '') {\n\t\t\treturn '\\'\\'';\n\t\t}\n\t\tif (s && typeof s === 'object') {\n\t\t\treturn s.op.replace(/(.)/g, '\\\\$1');\n\t\t}\n\t\tif ((/[\"\\s\\\\]/).test(s) && !(/'/).test(s)) {\n\t\t\treturn \"'\" + s.replace(/(['])/g, '\\\\$1') + \"'\";\n\t\t}\n\t\tif ((/[\"'\\s]/).test(s)) {\n\t\t\treturn '\"' + s.replace(/([\"\\\\$`!])/g, '\\\\$1') + '\"';\n\t\t}\n\t\treturn String(s).replace(/([A-Za-z]:)?([#!\"$&'()*,:;<=>?@[\\\\\\]^`{|}])/g, '$1\\\\$2');\n\t}).join(' ');\n};\n","'use strict';\n\n// '<(' is process substitution operator and\n// can be parsed the same as control operator\nvar CONTROL = '(?:' + [\n\t'\\\\|\\\\|',\n\t'\\\\&\\\\&',\n\t';;',\n\t'\\\\|\\\\&',\n\t'\\\\<\\\\(',\n\t'\\\\<\\\\<\\\\<',\n\t'>>',\n\t'>\\\\&',\n\t'<\\\\&',\n\t'[&;()|<>]'\n].join('|') + ')';\nvar controlRE = new RegExp('^' + CONTROL + '$');\nvar META = '|&;()<> \\\\t';\nvar SINGLE_QUOTE = '\"((\\\\\\\\\"|[^\"])*?)\"';\nvar DOUBLE_QUOTE = '\\'((\\\\\\\\\\'|[^\\'])*?)\\'';\nvar hash = /^#$/;\n\nvar SQ = \"'\";\nvar DQ = '\"';\nvar DS = '$';\n\nvar TOKEN = '';\nvar mult = 0x100000000; // Math.pow(16, 8);\nfor (var i = 0; i < 4; i++) {\n\tTOKEN += (mult * Math.random()).toString(16);\n}\nvar startsWithToken = new RegExp('^' + TOKEN);\n\nfunction matchAll(s, r) {\n\tvar origIndex = r.lastIndex;\n\n\tvar matches = [];\n\tvar matchObj;\n\n\twhile ((matchObj = r.exec(s))) {\n\t\tmatches.push(matchObj);\n\t\tif (r.lastIndex === matchObj.index) {\n\t\t\tr.lastIndex += 1;\n\t\t}\n\t}\n\n\tr.lastIndex = origIndex;\n\n\treturn matches;\n}\n\nfunction getVar(env, pre, key) {\n\tvar r = typeof env === 'function' ? env(key) : env[key];\n\tif (typeof r === 'undefined' && key != '') {\n\t\tr = '';\n\t} else if (typeof r === 'undefined') {\n\t\tr = '$';\n\t}\n\n\tif (typeof r === 'object') {\n\t\treturn pre + TOKEN + JSON.stringify(r) + TOKEN;\n\t}\n\treturn pre + r;\n}\n\nfunction parseInternal(string, env, opts) {\n\tif (!opts) {\n\t\topts = {};\n\t}\n\tvar BS = opts.escape || '\\\\';\n\tvar BAREWORD = '(\\\\' + BS + '[\\'\"' + META + ']|[^\\\\s\\'\"' + META + '])+';\n\n\tvar chunker = new RegExp([\n\t\t'(' + CONTROL + ')', // control chars\n\t\t'(' + BAREWORD + '|' + SINGLE_QUOTE + '|' + DOUBLE_QUOTE + ')+'\n\t].join('|'), 'g');\n\n\tvar matches = matchAll(string, chunker);\n\n\tif (matches.length === 0) {\n\t\treturn [];\n\t}\n\tif (!env) {\n\t\tenv = {};\n\t}\n\n\tvar commented = false;\n\n\treturn matches.map(function (match) {\n\t\tvar s = match[0];\n\t\tif (!s || commented) {\n\t\t\treturn void undefined;\n\t\t}\n\t\tif (controlRE.test(s)) {\n\t\t\treturn { op: s };\n\t\t}\n\n\t\t// Hand-written scanner/parser for Bash quoting rules:\n\t\t//\n\t\t// 1. inside single quotes, all characters are printed literally.\n\t\t// 2. inside double quotes, all characters are printed literally\n\t\t//    except variables prefixed by '$' and backslashes followed by\n\t\t//    either a double quote or another backslash.\n\t\t// 3. outside of any quotes, backslashes are treated as escape\n\t\t//    characters and not printed (unless they are themselves escaped)\n\t\t// 4. quote context can switch mid-token if there is no whitespace\n\t\t//     between the two quote contexts (e.g. all'one'\"token\" parses as\n\t\t//     \"allonetoken\")\n\t\tvar quote = false;\n\t\tvar esc = false;\n\t\tvar out = '';\n\t\tvar isGlob = false;\n\t\tvar i;\n\n\t\tfunction parseEnvVar() {\n\t\t\ti += 1;\n\t\t\tvar varend;\n\t\t\tvar varname;\n\t\t\tvar char = s.charAt(i);\n\n\t\t\tif (char === '{') {\n\t\t\t\ti += 1;\n\t\t\t\tif (s.charAt(i) === '}') {\n\t\t\t\t\tthrow new Error('Bad substitution: ' + s.slice(i - 2, i + 1));\n\t\t\t\t}\n\t\t\t\tvarend = s.indexOf('}', i);\n\t\t\t\tif (varend < 0) {\n\t\t\t\t\tthrow new Error('Bad substitution: ' + s.slice(i));\n\t\t\t\t}\n\t\t\t\tvarname = s.slice(i, varend);\n\t\t\t\ti = varend;\n\t\t\t} else if ((/[*@#?$!_-]/).test(char)) {\n\t\t\t\tvarname = char;\n\t\t\t\ti += 1;\n\t\t\t} else {\n\t\t\t\tvar slicedFromI = s.slice(i);\n\t\t\t\tvarend = slicedFromI.match(/[^\\w\\d_]/);\n\t\t\t\tif (!varend) {\n\t\t\t\t\tvarname = slicedFromI;\n\t\t\t\t\ti = s.length;\n\t\t\t\t} else {\n\t\t\t\t\tvarname = slicedFromI.slice(0, varend.index);\n\t\t\t\t\ti += varend.index - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn getVar(env, '', varname);\n\t\t}\n\n\t\tfor (i = 0; i < s.length; i++) {\n\t\t\tvar c = s.charAt(i);\n\t\t\tisGlob = isGlob || (!quote && (c === '*' || c === '?'));\n\t\t\tif (esc) {\n\t\t\t\tout += c;\n\t\t\t\tesc = false;\n\t\t\t} else if (quote) {\n\t\t\t\tif (c === quote) {\n\t\t\t\t\tquote = false;\n\t\t\t\t} else if (quote == SQ) {\n\t\t\t\t\tout += c;\n\t\t\t\t} else { // Double quote\n\t\t\t\t\tif (c === BS) {\n\t\t\t\t\t\ti += 1;\n\t\t\t\t\t\tc = s.charAt(i);\n\t\t\t\t\t\tif (c === DQ || c === BS || c === DS) {\n\t\t\t\t\t\t\tout += c;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tout += BS + c;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (c === DS) {\n\t\t\t\t\t\tout += parseEnvVar();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tout += c;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (c === DQ || c === SQ) {\n\t\t\t\tquote = c;\n\t\t\t} else if (controlRE.test(c)) {\n\t\t\t\treturn { op: s };\n\t\t\t} else if (hash.test(c)) {\n\t\t\t\tcommented = true;\n\t\t\t\tvar commentObj = { comment: string.slice(match.index + i + 1) };\n\t\t\t\tif (out.length) {\n\t\t\t\t\treturn [out, commentObj];\n\t\t\t\t}\n\t\t\t\treturn [commentObj];\n\t\t\t} else if (c === BS) {\n\t\t\t\tesc = true;\n\t\t\t} else if (c === DS) {\n\t\t\t\tout += parseEnvVar();\n\t\t\t} else {\n\t\t\t\tout += c;\n\t\t\t}\n\t\t}\n\n\t\tif (isGlob) {\n\t\t\treturn { op: 'glob', pattern: out };\n\t\t}\n\n\t\treturn out;\n\t}).reduce(function (prev, arg) { // finalize parsed arguments\n\t\t// TODO: replace this whole reduce with a concat\n\t\treturn typeof arg === 'undefined' ? prev : prev.concat(arg);\n\t}, []);\n}\n\nmodule.exports = function parse(s, env, opts) {\n\tvar mapped = parseInternal(s, env, opts);\n\tif (typeof env !== 'function') {\n\t\treturn mapped;\n\t}\n\treturn mapped.reduce(function (acc, s) {\n\t\tif (typeof s === 'object') {\n\t\t\treturn acc.concat(s);\n\t\t}\n\t\tvar xs = s.split(RegExp('(' + TOKEN + '.*?' + TOKEN + ')', 'g'));\n\t\tif (xs.length === 1) {\n\t\t\treturn acc.concat(xs[0]);\n\t\t}\n\t\treturn acc.concat(xs.filter(Boolean).map(function (x) {\n\t\t\tif (startsWithToken.test(x)) {\n\t\t\t\treturn JSON.parse(x.split(TOKEN)[1]);\n\t\t\t}\n\t\t\treturn x;\n\t\t}));\n\t}, []);\n};\n","import {listModels} from \"./models\";\nimport {transcribe, isOpenAIMode} from \"./transcribe\";\n\nconst {subtitle, preferences, console} = iina;\n\nsubtitle.registerProvider(\"whisper\", {\n    search: async () => {\n        logCurrentSettings();\n        if (isOpenAIMode()) {\n            return [\n                subtitle.item({\n                    id: \"openai\",\n                    name: \"OpenAI Streaming\",\n                    size: \"cloud\",\n                    sha: \"n/a\",\n                    format: \"srt\",\n                }),\n            ];\n        }\n        return listModels().map(model => subtitle.item({\n            id: model.name, name: model.name, size: model.size, sha: model.sha, format: \"srt\",\n        }));\n    }, description: (item) => ({\n        name: item.data.id, left: item.data.size, right: item.data.sha,\n    }), download: async (item) => {\n        return Promise.resolve(transcribe(item.data.id));\n    },\n});\n\nfunction logCurrentSettings() {\n    const mode = (preferences.get(\"transcriber_mode\") || \"whisper_server\").toString();\n    if (mode === \"openai\") {\n        const model = preferences.get(\"openai_model\") || \"gpt-4o-transcribe-diarize\";\n        const responseFormat = preferences.get(\"openai_response_format\") || \"json\";\n        const chunking = preferences.get(\"openai_chunking_strategy\") || \"auto\";\n        const endpoint = preferences.get(\"openai_base_url\") || \"https://api.openai.com/v1/audio/transcriptions\";\n        console.log(`[Whisperina] Provider search -> mode=openai, model=${model}, format=${responseFormat}, chunking=${chunking}, endpoint=${endpoint}`);\n    } else {\n        const serverPath = preferences.get(\"wserver_path\") || \"(unset)\";\n        const host = preferences.get(\"wserver_host\") || \"127.0.0.1\";\n        const port = preferences.get(\"wserver_port\") || \"17896\";\n        console.log(`[Whisperina] Provider search -> mode=whisper_server, path=${serverPath}, host=${host}, port=${port}`);\n    }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n        var info = gen[key](arg);\n        var value = info.value;\n    } catch (error) {\n        reject(error);\n        return;\n    }\n    if (info.done) resolve(value);\n    else Promise.resolve(value).then(_next, _throw);\n}\nfunction _async_to_generator(fn) {\n    return function() {\n        var self = this, args = arguments;\n\n        return new Promise(function(resolve, reject) {\n            var gen = fn.apply(self, args);\n\n            function _next(value) {\n                asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n            }\n\n            function _throw(err) {\n                asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n            }\n\n            _next(undefined);\n        });\n    };\n}\nexport { _async_to_generator as _ };\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","const {preferences} = iina;\n\nconst MODELS = [{\n    name: 'tiny', size: '75 MiB', sha: 'bd577a113a864445d4c299885e0cb97d4ba92b5f'\n}, {\n    name: 'tiny.en', size: '75 MiB', sha: 'c78c86eb1a8faa21b369bcd33207cc90d64ae9df'\n}, {\n    name: 'base', size: '142 MiB', sha: '465707469ff3a37a2b9b8d8f89f2f99de7299dac'\n}, {\n    name: 'base.en', size: '142 MiB', sha: '137c40403d78fd54d454da0f9bd998f78703390c'\n}, {\n    name: 'small', size: '466 MiB', sha: '55356645c2b361a969dfd0ef2c5a50d530afd8d5'\n}, {\n    name: 'small.en', size: '466 MiB', sha: 'db8a495a91d927739e50b3fc1cc4c6b8f6c2d022'\n}, {\n    name: 'small.en-tdrz', size: '465 MiB', sha: 'b6c6e7e89af1a35c08e6de56b66ca6a02a2fdfa1'\n}, {\n    name: 'medium', size: '1.5 GiB', sha: 'fd9727b6e1217c2f614f9b698455c4ffd82463b4'\n}, {\n    name: 'medium.en', size: '1.5 GiB', sha: '8c30f0e44ce9560643ebd10bbe50cd20eafd3723'\n}, {\n    name: 'large-v1', size: '2.9 GiB', sha: 'b1caaf735c4cc1429223d5a74f0f4d0b9b59a299'\n}, {\n    name: 'large-v2', size: '2.9 GiB', sha: '0f4c8e34f21cf1a914c59d8b3ce882345ad349d6'\n}, {\n    name: 'large-v2-q5_0', size: '1.1 GiB', sha: '00e39f2196344e901b3a2bd5814807a769bd1630'\n}, {\n    name: 'large-v3', size: '2.9 GiB', sha: 'ad82bf6a9043ceed055076d0fd39f5f186ff8062'\n}, {\n    name: 'large-v3-q5_0', size: '1.1 GiB', sha: 'e6e2ed78495d403bef4b7cff42ef4aaadcfea8de'\n}, {\n    name: 'large-v3-turbo', size: '1.5 GiB', sha: '4af2b29d7ec73d781377bfd1758ca957a807e941'\n}, {\n    name: 'large-v3-turbo-q5_0', size: '547 MiB', sha: 'e050f7970618a659205450ad97eb95a18d69c9ee'\n}]\n\nexport const listModels = function () {\n    return MODELS.filter(model => preferences.get('show_' + model.name.replaceAll(/[-.]/g, '_')))\n}","import {parse} from \"shell-quote\";\n\nconst {console, core, preferences, utils, http, file} = iina;\n\nconst HOME_PATH = '~/Library/Application Support/com.colliderli.iina/plugins/';\nconst SERVER_PID_FILE = \"@tmp/whisper_server.pid\";\nconst LOG_POLL_INTERVAL_MS = 1000;\nconst LOG_SEGMENT_REGEX = /^\\[(\\d{2}:\\d{2}:\\d{2}\\.\\d{3}) --> (\\d{2}:\\d{2}:\\d{2}\\.\\d{3})]\\s+(.*)$/;\nconst OPENAI_SIZE_LIMIT_BYTES = 25 * 1024 * 1024;\nconst OPENAI_AUDIO_PROFILES = [\n    {\n        name: \"aac_high\",\n        ext: \"m4a\",\n        mime: \"audio/mp4\",\n        description: \"AAC 96 kbps mono 16 kHz\",\n        ffmpegArgs: ['-vn', '-ar', '16000', '-ac', '1', '-c:a', 'aac', '-b:a', '96k', '-movflags', '+faststart'],\n    },\n    {\n        name: \"aac_medium\",\n        ext: \"m4a\",\n        mime: \"audio/mp4\",\n        description: \"AAC 64 kbps mono 16 kHz\",\n        ffmpegArgs: ['-vn', '-ar', '16000', '-ac', '1', '-c:a', 'aac', '-b:a', '64k', '-movflags', '+faststart'],\n    },\n    {\n        name: \"opus_voice\",\n        ext: \"webm\",\n        mime: \"audio/webm\",\n        description: \"Opus 48 kbps mono 16 kHz\",\n        ffmpegArgs: ['-vn', '-ar', '16000', '-ac', '1', '-c:a', 'libopus', '-b:a', '48k', '-vbr', 'on'],\n    },\n    {\n        name: \"mp3_speech\",\n        ext: \"mp3\",\n        mime: \"audio/mpeg\",\n        description: \"MP3 64 kbps mono 16 kHz\",\n        ffmpegArgs: ['-vn', '-ar', '16000', '-ac', '1', '-b:a', '64k', '-f', 'mp3'],\n    },\n    {\n        name: \"mp3_low\",\n        ext: \"mp3\",\n        mime: \"audio/mpeg\",\n        description: \"MP3 48 kbps mono 16 kHz\",\n        ffmpegArgs: ['-vn', '-ar', '16000', '-ac', '1', '-b:a', '48k', '-f', 'mp3'],\n    },\n];\n\nlet activeServerInfo = null;\n\nexport async function transcribe(model) {\n    const useOpenAI = isOpenAIMode();\n    console.log(`[Whisperina] Selected backend: ${useOpenAI ? \"OpenAI Streaming API\" : \"Local whisper.cpp server\"}.`);\n    if (!useOpenAI) {\n        await downloadOrGetModel(model);\n    }\n    const url = core.status.url;\n    if (!url.startsWith(\"file://\")) {\n        throw new Error(`Subtitle generation doesn't work with non-local file ${url}.`);\n    }\n    const fileName = url.substring(7);\n    core.osd(\"Generating temporary wave file...\");\n    const tempWavFile = await generateTemporaryWaveFiles(fileName);\n    console.log(`[Whisperina] Temporary WAV ready at ${tempWavFile}.`);\n\n    core.osd(useOpenAI ? \"Transcribing with OpenAI...\" : \"Transcribing...\");\n\n    const subtitlePath = useOpenAI\n        ? await transcribeWithOpenAI(tempWavFile, fileName)\n        : await transcribeWithWhisperServer(tempWavFile, model, fileName);\n\n    core.osd(\"Transcription succeeded.\");\n    return [subtitlePath];\n}\n\nasync function downloadOrGetModel(model) {\n    if (utils.fileInPath(`@data/ggml-${model}.bin`)) {\n        core.osd(`Model ${model} already exists.`);\n    } else if (utils.ask(`Model ${model} does not exist. Would you like to download it now?`)) {\n        await execWrapped(`${HOME}/bin/download-ggml-model.sh`, [model], DATA);\n        core.osd(`Model ${model} has been successfully downloaded.`);\n    } else {\n        throw Error(`No such model ${model}.`);\n    }\n}\n\nasync function generateTemporaryWaveFiles(fileName) {\n    const tempWavFile = utils.resolvePath(\"@tmp/whisper_tmp.wav\");\n    console.log(`[Whisperina] Running ffmpeg to produce intermediate WAV from ${fileName}.`);\n    await execWrapped(getFfmpegPath(), ['-y', '-i', fileName, '-ar', '16000', '-ac', '1', \"-c:a\", \"pcm_s16le\", tempWavFile]);\n    return tempWavFile;\n}\n\nasync function transcribeWithWhisperServer(tempWavName, modelName, sourceMediaPath) {\n    console.log(`[Whisperina] Starting whisper.cpp transcription with model ${modelName}.`);\n    const server = await startWhisperServer(modelName);\n    const subtitlePath = utils.resolvePath(\"@tmp/whisper_tmp.wav.srt\");\n    try {\n        await streamTranscription(server, tempWavName, subtitlePath);\n        await persistSubtitleCopy(subtitlePath, sourceMediaPath);\n        console.log(\"[Whisperina] whisper.cpp transcription finished.\");\n        return subtitlePath;\n    } finally {\n        await stopWhisperServer(server);\n    }\n}\n\nasync function transcribeWithOpenAI(tempWavName, sourceMediaPath) {\n    console.log(\"[Whisperina] Starting OpenAI streaming transcription.\");\n    const subtitlePath = utils.resolvePath(\"@tmp/whisper_tmp.wav.srt\");\n    const rawResponsePath = `${subtitlePath}.openai.json`;\n    const preparedAudio = await prepareAudioForOpenAI(tempWavName);\n    const streamHandler = createOpenAIStreamHandler(subtitlePath, rawResponsePath);\n    try {\n        await executeOpenAIStreamingRequest(preparedAudio, streamHandler);\n        await streamHandler.waitForFlush();\n        await persistSubtitleCopy(subtitlePath, sourceMediaPath);\n        console.log(\"[Whisperina] OpenAI transcription finished.\");\n        return subtitlePath;\n    } finally {\n        await streamHandler.waitForFlush().catch(() => {});\n    }\n}\n\nasync function streamTranscription(serverInfo, wavPath, subtitlePath) {\n    const monitor = startLogMonitor(serverInfo.logPath, subtitlePath);\n    console.log(\"[Whisperina] Streaming captions from whisper-server log output.\");\n    let transcriptionError = null;\n    try {\n        const finalSrt = await requestTranscriptionFromServer(serverInfo, wavPath);\n        await monitor.finalize(finalSrt);\n    } catch (error) {\n        transcriptionError = error;\n        await monitor.finalize(null);\n    }\n    if (transcriptionError) {\n        throw transcriptionError;\n    }\n}\n\nasync function reloadSubtitleTrack(subtitlePath) {\n    try {\n        core.subtitle.loadTrack(subtitlePath);\n    } catch (error) {\n        console.warn(`Failed to reload subtitle track: ${error.message}`);\n    }\n}\n\nexport function isOpenAIMode() {\n    const modeRaw = preferences.get(\"transcriber_mode\");\n    const mode = (modeRaw === undefined || modeRaw === null ? \"whisper_server\" : `${modeRaw}`).trim().toLowerCase();\n    return mode === \"openai\";\n}\n\nasync function prepareAudioForOpenAI(wavPath) {\n    const currentSize = await statFileSize(wavPath);\n    console.log(`[Whisperina][OpenAI] Source WAV size: ${(currentSize / (1024 * 1024)).toFixed(2)} MB.`);\n    if (currentSize <= OPENAI_SIZE_LIMIT_BYTES) {\n        return {path: wavPath, mime: \"audio/wav\"};\n    }\n\n    for (const profile of OPENAI_AUDIO_PROFILES) {\n        const outputPath = utils.resolvePath(`@tmp/whisper_tmp_openai.${profile.ext}`);\n        console.log(`[Whisperina][OpenAI] WAV exceeds 25 MB, re-encoding using ${profile.description}.`);\n        await convertAudioWithFfmpeg(wavPath, outputPath, profile);\n        const newSize = await statFileSize(outputPath);\n        console.log(`[Whisperina][OpenAI] ${profile.ext.toUpperCase()} size: ${(newSize / (1024 * 1024)).toFixed(2)} MB.`);\n        if (newSize <= OPENAI_SIZE_LIMIT_BYTES) {\n            console.log(`[Whisperina][OpenAI] Selected ${profile.description} for upload.`);\n            return {path: outputPath, mime: profile.mime};\n        }\n        console.log(`[Whisperina][OpenAI] ${profile.description} still exceeds 25 MB, trying next profile...`);\n    }\n\n    throw new Error(\"Audio file is still larger than 25 MB even after trying high-compression profiles. Please trim the media or lower its quality.\");\n}\n\nasync function statFileSize(path) {\n    const output = await execWrapped(\"/usr/bin/stat\", [\"-f\", \"%z\", path], null, {silent: true});\n    const size = parseInt(output.trim(), 10);\n    return Number.isFinite(size) ? size : 0;\n}\n\nasync function convertAudioWithFfmpeg(inputPath, outputPath, codecOptions) {\n    const args = ['-y', '-i', inputPath].concat(codecOptions.ffmpegArgs || []).concat([outputPath]);\n    await execWrapped(getFfmpegPath(), args);\n    return outputPath;\n}\n\nasync function executeOpenAIStreamingRequest(upload, handler) {\n    const apiKey = (preferences.get(\"openai_api_key\") || \"\").trim();\n    if (!apiKey) {\n        throw new Error(\"OpenAI API key is not configured. Please update the preferences page.\");\n    }\n    const baseUrl = (preferences.get(\"openai_base_url\") || \"https://api.openai.com/v1/audio/transcriptions\").trim();\n    const model = (preferences.get(\"openai_model\") || \"gpt-4o-transcribe-diarize\").trim();\n    const responseFormat = (preferences.get(\"openai_response_format\") || \"json\").trim();\n    const chunkingStrategy = (preferences.get(\"openai_chunking_strategy\") || \"\").trim();\n\n    console.log(`[Whisperina][OpenAI] Streaming request -> model=${model}, response_format=${responseFormat}, chunking=${chunkingStrategy || \"default\"}, endpoint=${baseUrl}`);\n    const args = [\n        \"curl\",\n        \"-sN\",\n        \"-X\", \"POST\",\n        baseUrl,\n        \"-H\", `Authorization: Bearer ${apiKey}`,\n        \"-H\", \"Accept: text/event-stream\",\n        \"-F\", `file=@${upload.path}`,\n        \"-F\", `model=${model}`,\n        \"-F\", `response_format=${responseFormat}`,\n        \"-F\", \"stream=true\",\n    ];\n    if (chunkingStrategy) {\n        args.push(\"-F\", `chunking_strategy=${chunkingStrategy}`);\n    }\n    const result = await utils.exec(\"/usr/bin/env\", args, null, handler.handleChunk, handler.handleError);\n    handler.finalize();\n    if (result.status !== 0) {\n        throw new Error(`OpenAI streaming request failed (status ${result.status}). Check your API key, quota, or model settings.`);\n    }\n}\n\nfunction createOpenAIStreamHandler(subtitlePath, rawResponsePath) {\n    let buffer = \"\";\n    const segments = [];\n    const segmentMap = new Map();\n    let writeChain = Promise.resolve();\n    const rawEvents = [];\n    let rawLogReported = false;\n    let rawText = \"\";\n\n    function nowIso() {\n        return new Date().toISOString();\n    }\n\n    function recordRawEvent(payload) {\n        const entry = {\n            timestamp: nowIso(),\n            payload,\n        };\n        rawEvents.push(entry);\n        return entry;\n    }\n\n    function writeRawDump() {\n        if (!rawResponsePath) {\n            return;\n        }\n        try {\n            const dump = {\n                generated_at: nowIso(),\n                raw_text: rawText,\n                events: rawEvents,\n            };\n            file.write(rawResponsePath, JSON.stringify(dump, null, 2));\n            if (!rawLogReported) {\n                rawLogReported = true;\n                console.log(`[Whisperina][OpenAI] Saved raw streaming response to ${rawResponsePath}`);\n            }\n        } catch (error) {\n            console.warn(`Failed to write raw OpenAI response: ${error.message}`);\n        }\n    }\n\n    function handleChunk(data) {\n        const chunk = coerceChunkToString(data);\n        if (!chunk) {\n            return;\n        }\n        rawText += chunk;\n        buffer += chunk;\n        processBuffer();\n    }\n\n    function handleError(data) {\n        if (data && data.trim().length > 0) {\n            console.warn(`OpenAI stream stderr: ${data}`);\n        }\n    }\n\n    function finalize() {\n        processBuffer(true);\n        writeRawDump();\n    }\n\n    function processBuffer(force = false) {\n        let newlineIndex;\n        while ((newlineIndex = buffer.indexOf(\"\\n\")) >= 0) {\n            const line = buffer.slice(0, newlineIndex).trim();\n            buffer = buffer.slice(newlineIndex + 1);\n            processLine(line);\n        }\n        if (force && buffer.trim().length > 0) {\n            processLine(buffer.trim());\n            buffer = \"\";\n        }\n    }\n\n    function processLine(line) {\n        if (!line || line.startsWith(\":\")) {\n            return;\n        }\n        if (!line.startsWith(\"data:\")) {\n            return;\n        }\n        const payload = line.slice(5).trim();\n        const debugEntry = recordRawEvent(payload);\n        if (!payload || payload === \"[DONE]\") {\n            return;\n        }\n        let event;\n        try {\n            event = JSON.parse(payload);\n            debugEntry.parsed = event;\n        } catch (error) {\n            debugEntry.parse_error = error.message;\n            console.warn(`Unable to parse OpenAI SSE payload: ${error.message}`);\n            return;\n        }\n        handleEvent(event);\n    }\n\n    function handleEvent(event) {\n        if (!event || typeof event !== \"object\") {\n            return;\n        }\n        if (event.type === \"transcript.text.segment\" && event.segment) {\n            if (upsertSegment(event.segment)) {\n                scheduleFlush();\n            }\n        } else if (event.type === \"transcript.text.done\") {\n            if (Array.isArray(event.segments) && event.segments.length > 0) {\n                segments.length = 0;\n                segmentMap.clear();\n                event.segments.forEach(segment => upsertSegment(segment, {skipFlush: true}));\n                scheduleFlush();\n            } else if (typeof event.text === \"string\") {\n                setTextOnly(event.text);\n            }\n            console.log(`[Whisperina][OpenAI] Received final transcript with ${segments.length} segment(s).`);\n        } else if (event.type === \"transcript.text.delta\" && typeof event.delta === \"string\") {\n            setTextOnly(event.delta, {append: true});\n        } else if (event.type === \"response.error\" && event.error) {\n            console.error(`OpenAI response error: ${event.error.message || \"unknown error\"}`);\n        }\n    }\n\n    function upsertSegment(rawSegment, options = {}) {\n        const normalized = normalizeOpenAISegment(rawSegment);\n        if (!normalized) {\n            return false;\n        }\n        const existingIndex = segmentMap.has(normalized.id) ? segmentMap.get(normalized.id) : -1;\n        if (existingIndex >= 0) {\n            segments[existingIndex] = normalized;\n        } else {\n            segmentMap.set(normalized.id, segments.length);\n            segments.push(normalized);\n            segments.sort((a, b) => a.startMs - b.startMs);\n            segments.forEach((segment, index) => segmentMap.set(segment.id, index));\n        }\n        if (!options.skipFlush) {\n            scheduleFlush();\n        }\n        return true;\n    }\n\n    function setTextOnly(text, options = {}) {\n        const content = (options.append && segments.length > 0)\n            ? `${segments[segments.length - 1].textLines.join(\" \")} ${text}`.trim()\n            : (text || \"\").trim();\n        if (!content) {\n            return;\n        }\n        const estimatedDuration = getMediaDurationMs() || estimateDurationFromText(content);\n        segments.length = 0;\n        segmentMap.clear();\n        segments.push({\n            id: \"text-only\",\n            startMs: 0,\n            endMs: estimatedDuration,\n            textLines: splitTextIntoLines(content),\n        });\n        segmentMap.set(\"text-only\", 0);\n        scheduleFlush();\n    }\n\n    function scheduleFlush() {\n        writeChain = writeChain.then(async () => {\n            writeRawDump();\n            const rendered = renderSegmentsToSrt(segments);\n            file.write(subtitlePath, rendered);\n            await reloadSubtitleTrack(subtitlePath);\n        }).catch(error => {\n            console.warn(`Failed to update  streaming subtitles: ${error.message}`);\n        });\n        return writeChain;\n    }\n\n    function normalizeOpenAISegment(segment) {\n        if (!segment) {\n            return null;\n        }\n        const text = (segment.text || \"\").trim();\n        if (!text) {\n            return null;\n        }\n        const startMs = secondsToMs(segment.start ?? segment.start_time ?? 0);\n        const endMs = secondsToMs(segment.end ?? segment.end_time ?? startMs + 2);\n        const id = segment.id || `${startMs}-${endMs}-${text.length}`;\n        return {\n            id,\n            startMs,\n            endMs,\n            textLines: splitTextIntoLines(text),\n        };\n    }\n\n        return {\n            handleChunk,\n            handleError,\n            finalize,\n            async waitForFlush() {\n                await writeChain;\n                writeRawDump();\n                console.log(`[Whisperina][OpenAI] Subtitle file flushed with ${segments.length} segment(s).`);\n            },\n        };\n}\n\nfunction coerceChunkToString(data) {\n    if (data === undefined || data === null) {\n        return \"\";\n    }\n    if (typeof data === \"string\") {\n        return data;\n    }\n    if (typeof data === \"object\") {\n        try {\n            if (typeof data.string === \"function\") {\n                const strValue = data.string();\n                if (typeof strValue === \"string\") {\n                    return strValue;\n                }\n            }\n            if (typeof data.toString === \"function\") {\n                const repr = data.toString();\n                if (typeof repr === \"string\" && repr !== \"[object Object]\") {\n                    return repr;\n                }\n            }\n            const json = JSON.stringify(data);\n            if (typeof json === \"string\") {\n                return json;\n            }\n        } catch (error) {\n            console.warn(`Failed to convert stream chunk to string: ${error.message}`);\n        }\n    }\n    return `${data}`;\n}\n\nfunction startLogMonitor(logPath, subtitlePath) {\n    const seen = new Set();\n    const segments = [];\n    let stopRequested = false;\n    console.log(`[Whisperina] Monitoring whisper-server log at ${logPath}.`);\n    const loopPromise = (async () => {\n        while (!stopRequested) {\n            try {\n                const updated = collectNewSegments(logPath, seen, segments);\n                if (updated) {\n                    const rendered = renderSegmentsToSrt(segments);\n                    file.write(subtitlePath, rendered);\n                    await reloadSubtitleTrack(subtitlePath);\n                }\n            } catch (error) {\n                console.warn(`Log monitor error: ${error.message}`);\n            }\n            await sleep(LOG_POLL_INTERVAL_MS);\n        }\n    })();\n\n    return {\n        async finalize(finalSrt) {\n            stopRequested = true;\n            await loopPromise;\n            if (finalSrt) {\n                file.write(subtitlePath, finalSrt);\n                await reloadSubtitleTrack(subtitlePath);\n            }\n        },\n    };\n}\n\nfunction collectNewSegments(logPath, seen, segments) {\n    if (!logPath || !file.exists(logPath)) {\n        return false;\n    }\n    const content = file.read(logPath) || \"\";\n    if (!content) {\n        return false;\n    }\n    const lines = content.split(/\\r?\\n/);\n    let updated = false;\n    let addedCount = 0;\n    for (const rawLine of lines) {\n        const line = rawLine.trim();\n        if (!line) {\n            continue;\n        }\n        const match = LOG_SEGMENT_REGEX.exec(line);\n        if (!match) {\n            continue;\n        }\n        const [, start, end, textRaw] = match;\n        const text = textRaw.trim();\n        const key = `${start}|${end}|${text}`;\n        if (seen.has(key)) {\n            continue;\n        }\n        seen.add(key);\n        segments.push({\n            timing: `${convertLogTimestamp(start)} --> ${convertLogTimestamp(end)}`,\n            text: [text],\n        });\n        updated = true;\n        addedCount += 1;\n    }\n    if (updated) {\n        console.log(`[Whisperina] Added ${addedCount} new whisper-server segments (total=${segments.length}).`);\n    }\n    return updated;\n}\n\nfunction convertLogTimestamp(value) {\n    if (!value) {\n        return \"00:00:00,000\";\n    }\n    const [whole = \"\", fractional = \"000\"] = value.split(\".\");\n    const frac = (fractional + \"000\").slice(0, 3);\n    return `${whole},${frac}`;\n}\n\nasync function startWhisperServer(modelName) {\n    const serverPath = getWhisperServerPath();\n    const host = preferences.get(\"wserver_host\") || \"127.0.0.1\";\n    const port = parseInt(preferences.get(\"wserver_port\"), 10) || 17896;\n    const logPath = utils.resolvePath(\"@tmp/whisper_server.log\");\n    const args = ['-m', `${DATA}/ggml-${modelName}.bin`, '--host', host, '--port', `${port}`].concat(getServerOptions());\n    const command = `${shellEscape(serverPath)} ${args.map(shellEscape).join(\" \")} > ${shellEscape(logPath)} 2>&1 & echo $!`;\n    console.log(`[Whisperina] Launching whisper-server via: ${command}`);\n    const stdout = await execWrapped(\"/bin/sh\", [\"-c\", command], null, {silent: true});\n    const pid = parseInt(stdout.trim().split(\"\\n\").pop() || \"\", 10);\n    if (!Number.isFinite(pid)) {\n        throw new Error(\"Unable to start whisper-server. Check your server path and options.\");\n    }\n    const serverInfo = {pid, host, port, baseUrl: `http://${host}:${port}`, logPath};\n    activeServerInfo = serverInfo;\n    rememberServerPid(pid);\n    try {\n        await waitForServerReady(serverInfo.baseUrl);\n        console.log(\"[Whisperina] whisper-server reported healthy.\");\n    } catch (error) {\n        console.error(`Failed to start whisper-server (log: ${logPath})`);\n        await stopWhisperServer(serverInfo);\n        throw error;\n    }\n    return serverInfo;\n}\n\nasync function waitForServerReady(baseUrl, timeoutMs = 20000) {\n    const healthUrl = `${baseUrl}/health`;\n    const deadline = Date.now() + timeoutMs;\n    let lastError;\n    while (Date.now() < deadline) {\n        try {\n            const response = await http.get(healthUrl);\n            if (response.statusCode === 200) {\n                return;\n            }\n            lastError = new Error(`Unexpected server status: ${response.statusCode}`);\n        } catch (error) {\n            lastError = error;\n        }\n        await sleep(300);\n    }\n    const reason = lastError ? lastError.message : \"unknown\";\n    throw new Error(`Timed out waiting for whisper-server to become ready (${reason}).`);\n}\n\nasync function requestTranscriptionFromServer(serverInfo, wavPath) {\n    const inferenceUrl = `${serverInfo.baseUrl}/inference`;\n    const stdout = await execWrapped(\"/usr/bin/env\", [\n        \"curl\",\n        \"-sS\",\n        \"-f\",\n        \"-X\",\n        \"POST\",\n        \"-F\",\n        `file=@${wavPath}`,\n        \"-F\",\n        \"response_format=srt\",\n        inferenceUrl,\n    ], null, {silent: true});\n    return stdout;\n}\n\nasync function stopWhisperServer(serverInfo) {\n    const info = serverInfo || activeServerInfo;\n    const recordedPid = readRecordedServerPid();\n    const pid = info?.pid || recordedPid;\n    if (!pid) {\n        clearRecordedServerPid();\n        return;\n    }\n    try {\n        await utils.exec(\"/bin/kill\", [\"-TERM\", `${pid}`]);\n        await sleep(200);\n    } catch (error) {\n        if (!/No such process/i.test(error?.message || \"\")) {\n            console.warn(`Failed to terminate whisper-server (pid ${pid}): ${error.message}`);\n        }\n    }\n    try {\n        await utils.exec(\"/bin/kill\", [\"-KILL\", `${pid}`]);\n    } catch (error) {\n        if (!/No such process/i.test(error?.message || \"\")) {\n            console.warn(`Failed to force-stop whisper-server (pid ${pid}): ${error.message}`);\n        }\n    }\n    if (activeServerInfo && activeServerInfo.pid === pid) {\n        activeServerInfo = null;\n    }\n    clearRecordedServerPid();\n}\n\nasync function persistSubtitleCopy(subtitlePath, mediaFile) {\n    const archiveDir = resolveArchiveDirectory();\n    if (!archiveDir) {\n        return;\n    }\n    try {\n        await execWrapped(\"/bin/mkdir\", [\"-p\", archiveDir]);\n        const archiveName = `${sanitizeFileStem(mediaFile)}-${formatTimestampSuffix()}.srt`;\n        const destination = `${archiveDir}/${archiveName}`;\n        await execWrapped(\"/bin/cp\", [\"-f\", subtitlePath, destination]);\n        console.log(`Stored subtitle copy at ${destination}`);\n    } catch (error) {\n        console.warn(`Failed to archive subtitle: ${error.message}`);\n    }\n}\n\nfunction getServerOptions() {\n    return parseArgumentList(preferences.get(\"wserver_options\"));\n}\n\nfunction getFfmpegPath() {\n    const ffmpegPath = preferences.get(\"ffmpeg_path\");\n    if (!utils.fileInPath(ffmpegPath)) {\n        throw new Error(`Unable to locate ffmpeg executable at: ${ffmpegPath}. Check the preference page for more details.`);\n    }\n    return ffmpegPath;\n}\n\nfunction getPluginHomePath() {\n    const PLUGIN_NAME = 'io.github.yuxiqian.whisperina.iinaplugin';\n    const PLUGIN_NAME_DEV = 'whisperina.iinaplugin-dev';\n    if (utils.fileInPath(HOME_PATH + PLUGIN_NAME)) {\n        return utils.resolvePath(HOME_PATH + PLUGIN_NAME);\n    } else if (utils.fileInPath(HOME_PATH + PLUGIN_NAME_DEV)) {\n        return utils.resolvePath(HOME_PATH + PLUGIN_NAME_DEV);\n    } else {\n        throw new Error(\"Unable to locate plugin folder.\");\n    }\n}\n\nfunction getPluginDataPath() {\n    return utils.resolvePath(\"@data/\")\n}\n\nfunction getServerPidPath() {\n    try {\n        return utils.resolvePath(SERVER_PID_FILE);\n    } catch (error) {\n        console.warn(`Unable to resolve server PID file: ${error.message}`);\n        return null;\n    }\n}\n\nfunction rememberServerPid(pid) {\n    const pidPath = getServerPidPath();\n    if (!pidPath) {\n        return;\n    }\n    try {\n        file.write(pidPath, `${pid}`);\n    } catch (error) {\n        console.warn(`Unable to record whisper-server pid: ${error.message}`);\n    }\n}\n\nfunction clearRecordedServerPid() {\n    const pidPath = getServerPidPath();\n    if (!pidPath) {\n        return;\n    }\n    try {\n        if (file.exists(pidPath)) {\n            file.delete(pidPath);\n        }\n    } catch (error) {\n        console.warn(`Unable to remove PID record: ${error.message}`);\n    }\n}\n\nfunction readRecordedServerPid() {\n    const pidPath = getServerPidPath();\n    if (!pidPath) {\n        return null;\n    }\n    try {\n        if (!file.exists(pidPath)) {\n            return null;\n        }\n        const content = file.read(pidPath);\n        const pid = parseInt((content || \"\").trim(), 10);\n        return Number.isFinite(pid) ? pid : null;\n    } catch (error) {\n        console.warn(`Unable to read PID record: ${error.message}`);\n        return null;\n    }\n}\n\nfunction renderSegmentsToSrt(segments) {\n    if (!segments || segments.length === 0) {\n        return \"\";\n    }\n    const normalized = segments.map(normalizeRenderableSegment).filter(Boolean);\n    if (normalized.length === 0) {\n        return \"\";\n    }\n    normalized.sort((a, b) => a.startMs - b.startMs);\n    const lines = [];\n    normalized.forEach((segment, index) => {\n        lines.push(String(index + 1));\n        lines.push(`${formatTimestamp(segment.startMs)} --> ${formatTimestamp(segment.endMs)}`);\n        segment.textLines.forEach(textLine => lines.push(textLine));\n        lines.push(\"\");\n    });\n    return lines.join(\"\\n\");\n}\n\nfunction normalizeRenderableSegment(segment) {\n    if (!segment) {\n        return null;\n    }\n    if (segment.timing) {\n        const [startRaw, endRaw] = segment.timing.split(/\\s+-->\\s+/);\n        return {\n            startMs: parseTimestampMs(startRaw),\n            endMs: parseTimestampMs(endRaw),\n            textLines: Array.isArray(segment.text) ? segment.text : Array.isArray(segment.textLines) ? segment.textLines : [segment.text || \"\"],\n        };\n    }\n    const startMs = typeof segment.startMs === \"number\" ? segment.startMs : 0;\n    const endMsCandidates = [\n        segment.endMs,\n        startMs + estimateDurationFromTextLines(segment.textLines || segment.text || []),\n    ].filter(value => typeof value === \"number\" && value > startMs);\n    const endMs = endMsCandidates.length > 0 ? Math.max(...endMsCandidates) : startMs + 2000;\n    const textLines = Array.isArray(segment.textLines)\n        ? segment.textLines\n        : Array.isArray(segment.text)\n            ? segment.text\n            : [segment.text || \"\"];\n    const filtered = textLines.filter(line => typeof line === \"string\" ? line.trim().length > 0 : false);\n    return {startMs, endMs, textLines: filtered.length > 0 ? filtered : [\"\"]};\n}\n\nfunction resolveArchiveDirectory() {\n    const configured = preferences.get(\"subtitle_archive_dir\");\n    if (!configured) {\n        return null;\n    }\n    try {\n        return utils.resolvePath(configured);\n    } catch (error) {\n        console.warn(`Unable to resolve archive directory \"${configured}\": ${error.message}`);\n        return null;\n    }\n}\n\nfunction sanitizeFileStem(filePath) {\n    if (!filePath) {\n        return \"subtitle\";\n    }\n    const normalized = filePath.replace(/\\\\/g, \"/\");\n    const baseName = normalized.substring(normalized.lastIndexOf(\"/\") + 1) || \"subtitle\";\n    const stem = baseName.replace(/\\.[^/.]+$/, \"\") || \"subtitle\";\n    return stem.replace(/[^A-Za-z0-9._-]+/g, \"_\") || \"subtitle\";\n}\n\nfunction formatTimestampSuffix(date = new Date()) {\n    const pad = (value) => String(value).padStart(2, \"0\");\n    return `${date.getFullYear()}${pad(date.getMonth() + 1)}${pad(date.getDate())}-${pad(date.getHours())}${pad(date.getMinutes())}${pad(date.getSeconds())}`;\n}\n\nfunction shellEscape(value) {\n    if (value === undefined || value === null) {\n        return \"''\";\n    }\n    const str = String(value);\n    if (/^[A-Za-z0-9_\\/.:=-]+$/.test(str)) {\n        return str;\n    }\n    return `'${str.replace(/'/g, `'\\\\''`)}'`;\n}\n\nfunction parseArgumentList(rawValue) {\n    if (!rawValue) {\n        return [];\n    }\n    try {\n        const parsed = parse(rawValue);\n        if (!Array.isArray(parsed) || parsed.length === 0) {\n            return [];\n        }\n        return parsed.filter(token => typeof token === \"string\" && token.length > 0).map(token => `${token}`);\n    } catch (error) {\n        console.warn(`Failed to parse option string \"${rawValue}\": ${error.message}`);\n        return [];\n    }\n}\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nfunction getMediaDurationMs() {\n    const duration = core?.status?.duration;\n    if (typeof duration === \"number\" && duration > 0) {\n        return Math.floor(duration * 1000);\n    }\n    return null;\n}\n\nfunction estimateDurationFromText(text) {\n    const words = (text || \"\").trim().split(/\\s+/).filter(Boolean).length;\n    const averageMsPerWord = 320; // ~187 wpm\n    return words > 0 ? words * averageMsPerWord : 4000;\n}\n\nfunction estimateDurationFromTextLines(lines) {\n    if (!lines || lines.length === 0) {\n        return 2000;\n    }\n    const joined = Array.isArray(lines) ? lines.join(\" \") : String(lines);\n    return estimateDurationFromText(joined);\n}\n\nfunction splitTextIntoLines(text) {\n    if (!text) {\n        return [];\n    }\n    return text.split(/\\r?\\n/).map(line => line.trim()).filter(Boolean);\n}\n\nfunction secondsToMs(value) {\n    if (typeof value !== \"number\" || Number.isNaN(value)) {\n        return 0;\n    }\n    return Math.max(0, Math.round(value * 1000));\n}\n\nfunction parseTimestampMs(value) {\n    const match = /^(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})$/.exec(value || \"\");\n    if (!match) {\n        return 0;\n    }\n    const [, hh, mm, ss, ms] = match;\n    return ((((parseInt(hh, 10) * 60) + parseInt(mm, 10)) * 60) + parseInt(ss, 10)) * 1000 + parseInt(ms, 10);\n}\n\nfunction formatTimestamp(ms) {\n    const clamped = Math.max(0, Math.floor(ms));\n    const hours = Math.floor(clamped / 3600000);\n    const minutes = Math.floor((clamped % 3600000) / 60000);\n    const seconds = Math.floor((clamped % 60000) / 1000);\n    const millis = clamped % 1000;\n    const pad = (num, len = 2) => String(num).padStart(len, \"0\");\n    return `${pad(hours)}:${pad(minutes)}:${pad(seconds)},${pad(millis, 3)}`;\n}\n\nasync function execWrapped(file, commands, cwd, options = {}) {\n    const {\n        status, stdout, stderr\n    } = await utils.exec(file, commands, cwd);\n    if (!options.silent) {\n        console.log(status);\n        console.log(stdout);\n        console.log(stderr);\n    }\n    if (status !== 0) {\n        throw new Error(`Bad return status code: ${status}`);\n    }\n    return stdout;\n}\n\nconst HOME = getPluginHomePath();\nconst DATA = getPluginDataPath();\n\nfunction getWhisperServerPath() {\n    const serverPath = preferences.get(\"wserver_path\");\n    if (!utils.fileInPath(serverPath)) {\n        throw new Error(`Unable to locate whisper-server executable at: ${serverPath}. Check the preference page for more details.`);\n    }\n    return serverPath;\n}\n","import { _ as _array_with_holes } from \"./_array_with_holes.js\";\nimport { _ as _iterable_to_array_limit } from \"./_iterable_to_array_limit.js\";\nimport { _ as _non_iterable_rest } from \"./_non_iterable_rest.js\";\nimport { _ as _unsupported_iterable_to_array } from \"./_unsupported_iterable_to_array.js\";\n\nfunction _sliced_to_array(arr, i) {\n    return _array_with_holes(arr) || _iterable_to_array_limit(arr, i) || _unsupported_iterable_to_array(arr, i) || _non_iterable_rest();\n}\nexport { _sliced_to_array as _ };\n","function _array_with_holes(arr) {\n    if (Array.isArray(arr)) return arr;\n}\nexport { _array_with_holes as _ };\n","function _iterable_to_array_limit(arr, i) {\n    var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n    if (_i == null) return;\n\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _s, _e;\n\n    try {\n        for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n            _arr.push(_s.value);\n            if (i && _arr.length === i) break;\n        }\n    } catch (err) {\n        _d = true;\n        _e = err;\n    } finally {\n        try {\n            if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n        } finally {\n            if (_d) throw _e;\n        }\n    }\n\n    return _arr;\n}\nexport { _iterable_to_array_limit as _ };\n","function _non_iterable_rest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _non_iterable_rest as _ };\n","import { _ as _array_like_to_array } from \"./_array_like_to_array.js\";\n\nfunction _unsupported_iterable_to_array(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _array_like_to_array(o, minLen);\n\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(n);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _array_like_to_array(o, minLen);\n}\nexport { _unsupported_iterable_to_array as _ };\n","function _array_like_to_array(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n}\nexport { _array_like_to_array as _ };\n","import { _ as _array_without_holes } from \"./_array_without_holes.js\";\nimport { _ as _iterable_to_array } from \"./_iterable_to_array.js\";\nimport { _ as _non_iterable_spread } from \"./_non_iterable_spread.js\";\nimport { _ as _unsupported_iterable_to_array } from \"./_unsupported_iterable_to_array.js\";\n\nfunction _to_consumable_array(arr) {\n    return _array_without_holes(arr) || _iterable_to_array(arr) || _unsupported_iterable_to_array(arr) || _non_iterable_spread();\n}\nexport { _to_consumable_array as _ };\n","import { _ as _array_like_to_array } from \"./_array_like_to_array.js\";\n\nfunction _array_without_holes(arr) {\n    if (Array.isArray(arr)) return _array_like_to_array(arr);\n}\nexport { _array_without_holes as _ };\n","function _iterable_to_array(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) {\n        return Array.from(iter);\n    }\n}\nexport { _iterable_to_array as _ };\n","function _non_iterable_spread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _non_iterable_spread as _ };\n","'use strict';\n\nexports.quote = require('./quote');\nexports.parse = require('./parse');\n"],"names":["$c4f3a659ba179370$export$98e6a39c04603d36","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","$6008c95c713781eb$var$asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","$6008c95c713781eb$export$71511d61b312f219","fn","args","arguments","apply","undefined","$18ac8221ad1dd540$export$67ebef60e6f28a6","thisArg","body","f","y","t","_","label","sent","trys","ops","g","Object","create","Iterator","prototype","next","verb","Symbol","iterator","n","v","op","TypeError","pop","length","push","e","xs","map","s","replace","test","String","join","$dbc9ba25ff865df3$var$CONTROL","$dbc9ba25ff865df3$var$controlRE","RegExp","$dbc9ba25ff865df3$var$META","$dbc9ba25ff865df3$var$hash","$dbc9ba25ff865df3$var$TOKEN","$dbc9ba25ff865df3$var$i","$dbc9ba25ff865df3$var$mult","Math","random","toString","$dbc9ba25ff865df3$var$startsWithToken","env","opts","mapped","$dbc9ba25ff865df3$var$parseInternal","string","BS","escape","matches","$dbc9ba25ff865df3$var$matchAll","r","matchObj","origIndex","lastIndex","exec","index","commented","match","i","quote","esc","out","isGlob","c","charAt","parseEnvVar","commentObj","comment","slice","pattern","varend","varname","char","indexOf","slicedFromI","pre","JSON","stringify","reduce","prev","concat","acc","split","filter","Boolean","x","parse","SuppressedError","$ef9582840825dae1$var$preferences","iina","preferences","$ef9582840825dae1$var$MODELS","name","size","sha","$dd5adb9c640d1882$export$71511d61b312f219","arr","len","arr2","Array","$aadf69894869ce83$export$71511d61b312f219","o","minLen","from","$d237cff101338c18$export$71511d61b312f219","isArray","_s","_e","_i","_arr","_n","_d","$f2bd40ec63a26367$var$console","console","$f2bd40ec63a26367$var$core","core","$f2bd40ec63a26367$var$preferences","$f2bd40ec63a26367$var$utils","utils","$f2bd40ec63a26367$var$http","http","$f2bd40ec63a26367$var$file","file","$f2bd40ec63a26367$var$HOME_PATH","$f2bd40ec63a26367$var$LOG_SEGMENT_REGEX","$f2bd40ec63a26367$var$OPENAI_AUDIO_PROFILES","ext","mime","description","ffmpegArgs","$f2bd40ec63a26367$var$activeServerInfo","$f2bd40ec63a26367$var$reloadSubtitleTrack","subtitlePath","_state","subtitle","loadTrack","warn","message","$f2bd40ec63a26367$export$15fc2836d2d9603","modeRaw","get","mode","trim","toLowerCase","$f2bd40ec63a26367$var$statFileSize","path","$f2bd40ec63a26367$var$execWrapped","silent","Number","isFinite","parseInt","output","$f2bd40ec63a26367$var$convertLogTimestamp","_value_split","tmp","tmp1","frac","fractional","$f2bd40ec63a26367$var$stopWhisperServer","serverInfo","recordedPid","pid","error1","$f2bd40ec63a26367$var$readRecordedServerPid","pidPath","$f2bd40ec63a26367$var$getServerPidPath","exists","content","read","$f2bd40ec63a26367$var$clearRecordedServerPid","$f2bd40ec63a26367$var$sleep","$f2bd40ec63a26367$var$persistSubtitleCopy","mediaFile","archiveDir","archiveName","destination","$f2bd40ec63a26367$var$resolveArchiveDirectory","configured","resolvePath","$f2bd40ec63a26367$var$sanitizeFileStem","filePath","normalized","stem","baseName","substring","lastIndexOf","$f2bd40ec63a26367$var$formatTimestampSuffix","date","Date","pad","padStart","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","log","$f2bd40ec63a26367$var$getFfmpegPath","ffmpegPath","fileInPath","delete","$f2bd40ec63a26367$var$renderSegmentsToSrt","segments","$f2bd40ec63a26367$var$normalizeRenderableSegment","sort","a","b","startMs","lines","forEach","segment","$f2bd40ec63a26367$var$formatTimestamp","endMs","textLines","textLine","timing","_Math","_segment_timing_split","startRaw","endRaw","$f2bd40ec63a26367$var$parseTimestampMs","text","endMsCandidates","$f2bd40ec63a26367$var$estimateDurationFromText","max","iter","filtered","line","$f2bd40ec63a26367$var$shellEscape","str","ms","setTimeout","words","$f2bd40ec63a26367$var$splitTextIntoLines","$f2bd40ec63a26367$var$secondsToMs","isNaN","round","_match","hh","mm","ss","clamped","floor","hours","minutes","seconds","num","_0","_1","_2","commands","cwd","options","_ref","status","stdout","stderr","_arguments","$f2bd40ec63a26367$var$HOME","$f2bd40ec63a26367$var$getPluginHomePath","PLUGIN_NAME","PLUGIN_NAME_DEV","$f2bd40ec63a26367$var$DATA","$7da9989b8341366f$var$subtitle","$7da9989b8341366f$var$preferences","$7da9989b8341366f$var$console","registerProvider","search","$7da9989b8341366f$var$logCurrentSettings","model","responseFormat","chunking","endpoint","serverPath","host","port","item","format","replaceAll","data","left","right","download","useOpenAI","url","fileName","tempWavFile","_tmp","tempWavName","sourceMediaPath","modelName","osd","ask","startsWith","rawResponsePath","preparedAudio","streamHandler","wavPath","upload","handler","currentSize","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","profile","outputPath","newSize","toFixed","inputPath","codecOptions","toUpperCase","return","$f2bd40ec63a26367$var$createOpenAIStreamHandler","buffer","segmentMap","Map","writeChain","rawEvents","rawLogReported","rawText","nowIso","toISOString","writeRawDump","dump","generated_at","raw_text","events","write","processBuffer","newlineIndex","force","processLine","event","entry","payload","debugEntry","timestamp","parsed","parse_error","type","upsertSegment","scheduleFlush","clear","skipFlush","setTextOnly","delta","append","rawSegment","normalizeOpenAISegment","_segment_start","_segment_end","_ref1","start","start_time","end","end_time","existingIndex","has","set","_core_status","duration","estimatedDuration","$f2bd40ec63a26367$var$getMediaDurationMs","rendered","catch","handleChunk","chunk","$f2bd40ec63a26367$var$coerceChunkToString","strValue","repr","json","handleError","finalize","waitForFlush","apiKey","baseUrl","chunkingStrategy","result","server","logPath","command","$f2bd40ec63a26367$var$getWhisperServerPath","$f2bd40ec63a26367$var$getServerOptions","rawValue","token","$f2bd40ec63a26367$var$rememberServerPid","$f2bd40ec63a26367$var$waitForServerReady","timeoutMs","healthUrl","deadline","lastError","response","reason","now","statusCode","monitor","transcriptionError","finalSrt","seen","stopRequested","loopPromise","Set","$f2bd40ec63a26367$var$collectNewSegments","updated","addedCount","rawLine","textRaw","add"],"version":3,"file":"index.js.map"}